{"ast":null,"code":"var _jsxFileName = \"/home/komal/Documents/Backup/FrontEnd/peoplelens_ui/src/components/molecules/ProductPortfolio/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Grid, makeStyles, Typography, useMediaQuery } from '@material-ui/core';\nimport { COLORS, plTheme } from '../../../plTheme';\nimport WidgetCard from '../../atoms/WidgetCard';\nimport { _t_ } from '../../../utils/translation/translation';\nimport { _n_ } from '../../../utils/numerals/numerals';\nimport { useGlobalStyles } from '../../../plStyles';\nimport { useWindowSize } from '../../../utils/hooks/useWindowSize';\nimport PortfolioPieChart from '../PortfolioPieChart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProductPortfolio = ({\n  salesClosed,\n  data,\n  previousYearData,\n  previousYearSalesClosed,\n  isInReport\n}) => {\n  _s();\n\n  const [width] = useWindowSize();\n  const useStyles = makeStyles({\n    main: {\n      padding: 16\n    },\n    horizontalPadding: {\n      padding: '0px 16px'\n    },\n    body1: {\n      color: COLORS.GREY_100\n    },\n    subElement: {\n      marginTop: isInReport ? 15 : 28,\n      // marginBottom: 6.82,\n      fontWeight: plTheme.typography.h5.fontWeight // width: isInReport ? '200px' : undefined,\n\n    },\n    subElement1: {\n      marginTop: '5%',\n      marginBottom: 6.82,\n      fontWeight: plTheme.typography.h5.fontWeight\n    },\n    chartElement: {\n      // marginTop: 78,\n      marginBottom: 10,\n      color: COLORS.TEXT_HIGH_EMPHASIS // width: 600,\n      // marginRight: '1rem',\n\n    },\n    internalSubElement: {\n      color: COLORS.TEXT_HIGH_EMPHASIS\n    },\n    root: {\n      height: 303,\n      padding: '16px 16px 0px 16px'\n    },\n    largeScreen: {\n      marginLeft: '-150px',\n      marginTop: '10px',\n      marginBottom: '10px'\n    },\n    smScreen: {\n      marginLeft: width < 1350 ? '-50px' : '-100px' // marginRight: \"30px\"\n\n    },\n    chartDiv: {\n      marginTop: isInReport ? '2rem' : undefined,\n      paddingLeft: isInReport ? '0.2rem' : undefined\n    },\n    yyDiv: {\n      // marginTop: '0.6rem',\n      height: 37\n    }\n  });\n  const [chartData, setChartData] = useState([]);\n  const [previousChartData, setPreviousChartData] = useState([]);\n  useEffect(() => {\n    const chartColors = [COLORS.MAIN_BLUE_PRESSED, COLORS.MAIN_HUE_2, COLORS.MAIN_BLUE_HOVER, COLORS.MAIN_HUE_3, COLORS.MAIN_HUE_4];\n\n    const loadData = () => {\n      if (!data) {\n        return;\n      }\n\n      const tempData = [];\n      let percentageOccupied = 0;\n\n      for (let i = 0; i < (data === null || data === void 0 ? void 0 : data.length); i++) {\n        var _data$i, _data$i2, _data$i2$product;\n\n        const obj = {\n          name: '',\n          color: '',\n          y: 0\n        };\n        const totalAmount = (_data$i = data[i]) === null || _data$i === void 0 ? void 0 : _data$i.totalAmount;\n        const itemPercentage = totalAmount && salesClosed && totalAmount / salesClosed * 100;\n        const productname = (_data$i2 = data[i]) === null || _data$i2 === void 0 ? void 0 : (_data$i2$product = _data$i2.product) === null || _data$i2$product === void 0 ? void 0 : _data$i2$product.name;\n        obj.name = productname ? productname : 'Product' + (i + 1).toString();\n        obj.y = totalAmount ? totalAmount : 0;\n        obj.color = chartColors[i];\n\n        if (itemPercentage) {\n          percentageOccupied += itemPercentage;\n        }\n\n        tempData.push(obj);\n      }\n\n      setChartData(tempData);\n    };\n\n    data && loadData();\n  }, [data, salesClosed]);\n  useEffect(() => {\n    const loadData2 = () => {\n      if (!previousYearData) {\n        return;\n      }\n\n      const tempData = [];\n\n      for (let i = 0; i < (previousYearData === null || previousYearData === void 0 ? void 0 : previousYearData.length); i++) {\n        var _previousYearData$i, _previousYearData$i2, _previousYearData$i2$;\n\n        const obj = {\n          name: '',\n          y: 0\n        };\n        const totalAmount = (_previousYearData$i = previousYearData[i]) === null || _previousYearData$i === void 0 ? void 0 : _previousYearData$i.totalAmount;\n        const productname = (_previousYearData$i2 = previousYearData[i]) === null || _previousYearData$i2 === void 0 ? void 0 : (_previousYearData$i2$ = _previousYearData$i2.product) === null || _previousYearData$i2$ === void 0 ? void 0 : _previousYearData$i2$.name;\n        obj.name = productname ? productname : 'Product' + (i + 1).toString();\n        obj.y = totalAmount ? totalAmount : 0;\n        tempData.push(obj);\n      }\n\n      setPreviousChartData(tempData);\n    };\n\n    previousYearData && loadData2();\n  }, [previousYearData, previousYearSalesClosed]);\n  const classes = useStyles();\n  const matches = useMediaQuery('(min-width:1500px)');\n  const globalClasses = useGlobalStyles();\n  return /*#__PURE__*/_jsxDEV(WidgetCard, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true // direction={isInReport ? 'column' : 'row'}\n      ,\n      direction: \"column\",\n      justify: \"flex-start\",\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        style: {\n          marginBottom: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          className: globalClasses.body1WidgetTitle,\n          style: {\n            overflow: 'visible'\n          },\n          children: _t_('PRODUCT PORTFOLIO')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          justify: \"flex-start\",\n          alignItems: \"center\",\n          spacing: 2,\n          className: classes.yyDiv,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              className: `${globalClasses.body1Light}`,\n              children: _t_('OVERALL SALES')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h3\",\n              className: classes.internalSubElement,\n              style: {\n                marginBottom: '3px'\n              },\n              children: [\"$\", salesClosed && _n_(salesClosed, '0,0.0a')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: `${globalClasses.body1Light} `,\n          children: _t_('(Y/Y growth)')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: isInReport ? '-10px' : '7px',\n          marginLeft: isInReport ? '0px' : '-120px'\n        },\n        children: /*#__PURE__*/_jsxDEV(PortfolioPieChart, {\n          currentData: chartData,\n          previousData: previousChartData,\n          isReport: isInReport\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductPortfolio, \"lP7PfAPOVNWZ5HshM49qPLnkrV8=\", true, function () {\n  return [useWindowSize, useMediaQuery, useGlobalStyles];\n});\n\n_c = ProductPortfolio;\nexport default ProductPortfolio;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductPortfolio\");","map":{"version":3,"sources":["/home/komal/Documents/Backup/FrontEnd/peoplelens_ui/src/components/molecules/ProductPortfolio/index.tsx"],"names":["React","useEffect","useState","Grid","makeStyles","Typography","useMediaQuery","COLORS","plTheme","WidgetCard","_t_","_n_","useGlobalStyles","useWindowSize","PortfolioPieChart","ProductPortfolio","salesClosed","data","previousYearData","previousYearSalesClosed","isInReport","width","useStyles","main","padding","horizontalPadding","body1","color","GREY_100","subElement","marginTop","fontWeight","typography","h5","subElement1","marginBottom","chartElement","TEXT_HIGH_EMPHASIS","internalSubElement","root","height","largeScreen","marginLeft","smScreen","chartDiv","undefined","paddingLeft","yyDiv","chartData","setChartData","previousChartData","setPreviousChartData","chartColors","MAIN_BLUE_PRESSED","MAIN_HUE_2","MAIN_BLUE_HOVER","MAIN_HUE_3","MAIN_HUE_4","loadData","tempData","percentageOccupied","i","length","obj","name","y","totalAmount","itemPercentage","productname","product","toString","push","loadData2","classes","matches","globalClasses","body1WidgetTitle","overflow","body1Light"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Grid, makeStyles, Typography, useMediaQuery } from '@material-ui/core';\nimport { COLORS, plTheme } from '../../../plTheme';\nimport WidgetCard from '../../atoms/WidgetCard';\nimport { _t_ } from '../../../utils/translation/translation';\nimport { _n_ } from '../../../utils/numerals/numerals';\nimport { getDashboardData_getDashboardData_salesOutcome_topProductContributors as DashboardTopProductContributors } from '../../../gql/types';\nimport { useGlobalStyles } from '../../../plStyles';\nimport { useWindowSize } from '../../../utils/hooks/useWindowSize';\nimport PortfolioPieChart from '../PortfolioPieChart';\n\ninterface ProductPortfolioProps {\n  data?: (DashboardTopProductContributors | null)[] | null;\n  salesClosed?: number | null;\n  previousYearData?: (DashboardTopProductContributors | null)[] | null;\n  previousYearSalesClosed?: number | null;\n  isInReport?: boolean;\n}\ninterface InitData {\n  name: string;\n  color: string;\n  y: number;\n}\n\ninterface InitData2 {\n  name: string;\n  y: number;\n}\n\nconst ProductPortfolio: React.FC<ProductPortfolioProps> = ({\n  salesClosed,\n  data,\n  previousYearData,\n  previousYearSalesClosed,\n  isInReport,\n}: ProductPortfolioProps) => {\n  const [width] = useWindowSize();\n\n  const useStyles = makeStyles({\n    main: {\n      padding: 16,\n    },\n    horizontalPadding: {\n      padding: '0px 16px',\n    },\n    body1: {\n      color: COLORS.GREY_100,\n    },\n    subElement: {\n      marginTop: isInReport ? 15 : 28,\n      // marginBottom: 6.82,\n      fontWeight: plTheme.typography.h5.fontWeight,\n      // width: isInReport ? '200px' : undefined,\n    },\n    subElement1: {\n      marginTop: '5%',\n      marginBottom: 6.82,\n      fontWeight: plTheme.typography.h5.fontWeight,\n    },\n    chartElement: {\n      // marginTop: 78,\n      marginBottom: 10,\n      color: COLORS.TEXT_HIGH_EMPHASIS,\n      // width: 600,\n      // marginRight: '1rem',\n    },\n    internalSubElement: {\n      color: COLORS.TEXT_HIGH_EMPHASIS,\n    },\n    root: {\n      height: 303,\n      padding: '16px 16px 0px 16px',\n    },\n    largeScreen: {\n      marginLeft: '-150px',\n      marginTop: '10px',\n      marginBottom: '10px',\n    },\n    smScreen: {\n      marginLeft: width < 1350 ? '-50px' : '-100px',\n      // marginRight: \"30px\"\n    },\n    chartDiv: {\n      marginTop: isInReport ? '2rem' : undefined,\n      paddingLeft: isInReport ? '0.2rem' : undefined,\n    },\n    yyDiv: {\n      // marginTop: '0.6rem',\n      height: 37,\n    },\n  });\n  const [chartData, setChartData] = useState<InitData[]>([]);\n  const [previousChartData, setPreviousChartData] = useState<InitData2[]>([]);\n  useEffect(() => {\n    const chartColors = [\n      COLORS.MAIN_BLUE_PRESSED,\n      COLORS.MAIN_HUE_2,\n      COLORS.MAIN_BLUE_HOVER,\n      COLORS.MAIN_HUE_3,\n      COLORS.MAIN_HUE_4,\n    ];\n    const loadData = () => {\n      if (!data) {\n        return;\n      }\n      const tempData: InitData[] = [];\n      let percentageOccupied = 0;\n      for (let i = 0; i < data?.length; i++) {\n        const obj: InitData = {\n          name: '',\n          color: '',\n          y: 0,\n        };\n        const totalAmount = data[i]?.totalAmount;\n        const itemPercentage =\n          totalAmount && salesClosed && (totalAmount / salesClosed) * 100;\n        const productname = data[i]?.product?.name;\n        obj.name = productname ? productname : 'Product' + (i + 1).toString();\n        obj.y = totalAmount ? totalAmount : 0;\n        obj.color = chartColors[i];\n        if (itemPercentage) {\n          percentageOccupied += itemPercentage;\n        }\n        tempData.push(obj);\n      }\n\n      setChartData(tempData);\n    };\n\n    data && loadData();\n  }, [data, salesClosed]);\n\n  useEffect(() => {\n    const loadData2 = () => {\n      if (!previousYearData) {\n        return;\n      }\n\n      const tempData: InitData2[] = [];\n      for (let i = 0; i < previousYearData?.length; i++) {\n        const obj: InitData2 = {\n          name: '',\n          y: 0,\n        };\n        const totalAmount = previousYearData[i]?.totalAmount;\n        const productname = previousYearData[i]?.product?.name;\n        obj.name = productname ? productname : 'Product' + (i + 1).toString();\n        obj.y = totalAmount ? totalAmount : 0;\n        tempData.push(obj);\n      }\n      setPreviousChartData(tempData);\n    };\n\n    previousYearData && loadData2();\n  }, [previousYearData, previousYearSalesClosed]);\n  const classes = useStyles();\n  const matches = useMediaQuery('(min-width:1500px)');\n  const globalClasses = useGlobalStyles();\n\n  return (\n    <WidgetCard>\n      <Grid\n        container\n        // direction={isInReport ? 'column' : 'row'}\n        direction=\"column\"\n        justify=\"flex-start\"\n        className={classes.root}\n      >\n        <Grid item style={{ marginBottom: 20 }}>\n          <Typography\n            className={globalClasses.body1WidgetTitle}\n            style={{ overflow: 'visible' }}\n          >\n            {_t_('PRODUCT PORTFOLIO')}\n          </Typography>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"center\"\n            spacing={2}\n            className={classes.yyDiv}\n          >\n            <Grid item>\n              <Typography className={`${globalClasses.body1Light}`}>\n                {_t_('OVERALL SALES')}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography\n                variant=\"h3\"\n                className={classes.internalSubElement}\n                style={{ marginBottom: '3px' }}\n              >\n                ${salesClosed && _n_(salesClosed, '0,0.0a')}\n              </Typography>\n            </Grid>\n          </Grid>\n          <Typography className={`${globalClasses.body1Light} `}>\n            {_t_('(Y/Y growth)')}\n          </Typography>\n        </Grid>\n        <div\n          style={{\n            marginTop: isInReport ? '-10px' : '7px',\n            marginLeft: isInReport ? '0px' : '-120px',\n          }}\n        >\n          <PortfolioPieChart\n            currentData={chartData}\n            previousData={previousChartData}\n            isReport={isInReport}\n          />\n        </div>\n      </Grid>\n    </WidgetCard>\n  );\n};\n\nexport default ProductPortfolio;\n"]},"metadata":{},"sourceType":"module"}