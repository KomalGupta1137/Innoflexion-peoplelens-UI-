{"ast":null,"code":"var _jsxFileName = \"/home/komal/Documents/Current/peoplelens_ui/src/components/organisms/SDRSalesActivities/index.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable @typescript-eslint/restrict-plus-operands */\n\n/* eslint-disable react-hooks/rules-of-hooks */\n\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { FormControl, Grid, makeStyles, MenuItem, Select, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { _t_ } from '../../../utils/translation/translation';\nimport CalendarIcon from '../../../assets/calendar.png';\nimport { COLORS, plTheme } from '../../../plTheme';\nimport { useWindowSize } from '../../../utils/hooks/useWindowSize';\nimport TimeAllocation from '../../molecules/TimeAllocation';\nimport RepActivityBenchmarks from '../RepActivityBenchmarks';\nimport { useQuery } from '@apollo/client';\nimport { GetPeopleActivitiesData } from '../../../gql/queries/dashboard';\nimport Loader from '../../atoms/Loader';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { addDays, addMinutes, addWeeks } from 'date-fns';\nimport moment from 'moment';\nimport SDRDealFunnel from '../SDRDealFunnel';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SDRSalesActivities = ({\n  currentWeek,\n  activeQuarter\n}) => {\n  _s();\n\n  var _data$peopleActivitie, _data$peopleActivitie2, _data$peopleActivitie3, _data$peopleActivitie4, _data$peopleActivitie5, _data$peopleActivitie6, _data$peopleActivitie7, _data$peopleActivitie8, _data$peopleActivitie9, _data$peopleActivitie10, _data$peopleActivitie11, _data$peopleActivitie12, _data$peopleActivitie13, _data$peopleActivitie14, _data$peopleActivitie15, _data$peopleActivitie16, _data$peopleActivitie17, _data$peopleActivitie18, _data$peopleActivitie19, _data$peopleActivitie20, _data$peopleActivitie21, _data$peopleActivitie22, _data$peopleActivitie23, _data$peopleActivitie24, _data$peopleActivitie25, _data$peopleActivitie26, _data$peopleActivitie27, _data$peopleActivitie28, _data$peopleActivitie29, _data$peopleActivitie30, _data$peopleActivitie31, _data$peopleActivitie32, _data$peopleActivitie33, _data$peopleActivitie34, _data$peopleActivitie35, _data$peopleActivitie36, _data$peopleActivitie37, _data$peopleActivitie38, _data$peopleActivitie39, _data$peopleActivitie40, _data$peopleActivitie41, _funnelData$peopleAct, _funnelData$peopleAct2, _funnelData$peopleAct3, _funnelData$peopleAct4, _funnelData$peopleAct5, _funnelData$peopleAct6, _funnelData$peopleAct7, _funnelData$peopleAct8, _funnelData$peopleAct9, _funnelData$peopleAct10;\n\n  const [width] = useWindowSize();\n  const useStyles = makeStyles({\n    subtitle: {\n      fontWeight: 300,\n      marginTop: 13\n    },\n    calendarIcon: {\n      width: 22,\n      height: 24\n    },\n    heading: {\n      marginTop: 60\n    },\n    mainDiv: {\n      marginTop: '2rem'\n    },\n    item: {\n      borderRadius: 4,\n      border: '1px solid ' + COLORS.BORDER_PRIMARY,\n      boxShadow: '0px 4px 20px ' + COLORS.BOX_SHADOW_CARDS\n    },\n    leftHeading: {\n      marginTop: 20,\n      marginBottom: 18,\n      marginLeft: width < 1500 ? 20 : 100\n    },\n    leftHeading1: {\n      marginBottom: 18,\n      marginLeft: width < 1500 ? 20 : 100\n    },\n    formControl: {\n      marginLeft: 22,\n      width: '216px',\n      marginBottom: -10\n    },\n    quantityRoot: {\n      '& .MuiOutlinedInput-notchedOutline': {\n        border: '1px solid rgba(215, 223, 233, 0.4)',\n        borderRadius: '2px'\n      },\n      '& .Mui-focused .MuiOutlinedInput-notchedOutline': {\n        border: '1px solid rgba(215, 223, 233, 0.4)',\n        borderRadius: '2px'\n      },\n      '&:hover .MuiOutlinedInput-notchedOutline': {\n        border: '1px solid rgba(215, 223, 233, 0.4)',\n        borderRadius: '2px'\n      }\n    },\n    rightSubHeading: {\n      fontFamily: plTheme.typography.fontFamily,\n      fontSize: plTheme.typography.subtitle1.fontSize,\n      fontWeight: plTheme.typography.h2.fontWeight,\n      lineHeight: plTheme.typography.subtitle1.lineHeight,\n      fontStyle: plTheme.typography.h3.fontStyle,\n      backgroundColor: COLORS.GENERAL_WHITE\n    },\n    dropDown: {\n      height: 40\n    },\n    icon: {\n      color: COLORS.TEXT_HIGH_EMPHASIS\n    },\n    selectRoot: {\n      '&:focus': {\n        backgroundColor: 'transparent'\n      }\n    }\n  });\n  const classes = useStyles();\n  const [userId, setUserId] = useState('');\n  const [firstDateOfQuarter, setFirstDateOfQuarter] = React.useState(new Date());\n  const [selectedOption, setSelectedOption] = React.useState(currentWeek === 1 ? 1 : currentWeek - 1);\n  useEffect(() => {\n    const start = moment().startOf('quarter');\n    const date = new Date(start.valueOf());\n    date.setFullYear(2020); //To be removed later!\n\n    setFirstDateOfQuarter(new Date(date.valueOf()));\n  }, [activeQuarter]);\n  useEffect(() => {\n    getStartDateOfQuery();\n    getEndDateOfQuery();\n  }, [firstDateOfQuarter, selectedOption]);\n  useEffect(() => {\n    getStartDateOfQuery();\n    getEndDateOfQuery();\n  }, [currentWeek]);\n\n  const getStartDateOfQuery = () => {\n    const outputDate = firstDateOfQuarter;\n    const newDate = addWeeks(outputDate, selectedOption - 1);\n    const nextDay = addDays(newDate, 1);\n    return nextDay.toISOString();\n  };\n\n  const getEndDateOfQuery = () => {\n    const outputDate = firstDateOfQuarter;\n    let newDate = addWeeks(outputDate, selectedOption - 1);\n    newDate = addDays(newDate, 8);\n    newDate = addMinutes(newDate, -1);\n    return newDate.toISOString();\n  };\n\n  const handleChange = event => {\n    setSelectedOption(event.target.value);\n  };\n\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(GetPeopleActivitiesData, {\n    variables: {\n      dashboardInput: {\n        startDate: getStartDateOfQuery(),\n        endDate: getEndDateOfQuery()\n      },\n      userId: userId,\n      persona: 'AE'\n    }\n  });\n  useEffect(() => {\n    void refetch();\n  }, [refetch, selectedOption]);\n  if (error) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"`Error! $\", error.message, \"` \"]\n  }, void 0, true);\n  const timeAllocationData = data === null || data === void 0 ? void 0 : (_data$peopleActivitie = data.peopleActivities) === null || _data$peopleActivitie === void 0 ? void 0 : _data$peopleActivitie.repTimeAllocation;\n  const progressBarData = [{\n    name: 'Activity Score (Per Opp)',\n    value: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie2 = data.peopleActivities) === null || _data$peopleActivitie2 === void 0 ? void 0 : (_data$peopleActivitie3 = _data$peopleActivitie2.objectiveScore) === null || _data$peopleActivitie3 === void 0 ? void 0 : _data$peopleActivitie3.curQuarterVal)),\n    percentage: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie4 = data.peopleActivities) === null || _data$peopleActivitie4 === void 0 ? void 0 : (_data$peopleActivitie5 = _data$peopleActivitie4.objectiveScore) === null || _data$peopleActivitie5 === void 0 ? void 0 : _data$peopleActivitie5.curQuarterVal) - Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie6 = data.peopleActivities) === null || _data$peopleActivitie6 === void 0 ? void 0 : (_data$peopleActivitie7 = _data$peopleActivitie6.objectiveScore) === null || _data$peopleActivitie7 === void 0 ? void 0 : _data$peopleActivitie7.prevQuarterVal)),\n    benchmarkValue: data === null || data === void 0 ? void 0 : (_data$peopleActivitie8 = data.peopleActivities) === null || _data$peopleActivitie8 === void 0 ? void 0 : (_data$peopleActivitie9 = _data$peopleActivitie8.objectiveScore) === null || _data$peopleActivitie9 === void 0 ? void 0 : _data$peopleActivitie9.benchMark\n  }, {\n    name: 'Time Allocation',\n    value: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie10 = data.peopleActivities) === null || _data$peopleActivitie10 === void 0 ? void 0 : (_data$peopleActivitie11 = _data$peopleActivitie10.timeAllocationScore) === null || _data$peopleActivitie11 === void 0 ? void 0 : _data$peopleActivitie11.curQuarterVal)),\n    percentage: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie12 = data.peopleActivities) === null || _data$peopleActivitie12 === void 0 ? void 0 : (_data$peopleActivitie13 = _data$peopleActivitie12.timeAllocationScore) === null || _data$peopleActivitie13 === void 0 ? void 0 : _data$peopleActivitie13.curQuarterVal) - Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie14 = data.peopleActivities) === null || _data$peopleActivitie14 === void 0 ? void 0 : (_data$peopleActivitie15 = _data$peopleActivitie14.timeAllocationScore) === null || _data$peopleActivitie15 === void 0 ? void 0 : _data$peopleActivitie15.prevQuarterVal)),\n    benchmarkValue: data === null || data === void 0 ? void 0 : (_data$peopleActivitie16 = data.peopleActivities) === null || _data$peopleActivitie16 === void 0 ? void 0 : (_data$peopleActivitie17 = _data$peopleActivitie16.timeAllocationScore) === null || _data$peopleActivitie17 === void 0 ? void 0 : _data$peopleActivitie17.benchMark\n  }, {\n    name: 'Email Responsiveness',\n    value: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie18 = data.peopleActivities) === null || _data$peopleActivitie18 === void 0 ? void 0 : (_data$peopleActivitie19 = _data$peopleActivitie18.pipelineDisciplineScore) === null || _data$peopleActivitie19 === void 0 ? void 0 : _data$peopleActivitie19.curQuarterVal)),\n    percentage: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie20 = data.peopleActivities) === null || _data$peopleActivitie20 === void 0 ? void 0 : (_data$peopleActivitie21 = _data$peopleActivitie20.pipelineDisciplineScore) === null || _data$peopleActivitie21 === void 0 ? void 0 : _data$peopleActivitie21.curQuarterVal) - Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie22 = data.peopleActivities) === null || _data$peopleActivitie22 === void 0 ? void 0 : (_data$peopleActivitie23 = _data$peopleActivitie22.pipelineDisciplineScore) === null || _data$peopleActivitie23 === void 0 ? void 0 : _data$peopleActivitie23.prevQuarterVal)),\n    benchmarkValue: data === null || data === void 0 ? void 0 : (_data$peopleActivitie24 = data.peopleActivities) === null || _data$peopleActivitie24 === void 0 ? void 0 : (_data$peopleActivitie25 = _data$peopleActivitie24.pipelineDisciplineScore) === null || _data$peopleActivitie25 === void 0 ? void 0 : _data$peopleActivitie25.benchMark\n  }, {\n    name: 'Contacts Touched per Account',\n    value: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie26 = data.peopleActivities) === null || _data$peopleActivitie26 === void 0 ? void 0 : (_data$peopleActivitie27 = _data$peopleActivitie26.followThrough) === null || _data$peopleActivitie27 === void 0 ? void 0 : _data$peopleActivitie27.curQuarterVal)),\n    percentage: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie28 = data.peopleActivities) === null || _data$peopleActivitie28 === void 0 ? void 0 : (_data$peopleActivitie29 = _data$peopleActivitie28.followThrough) === null || _data$peopleActivitie29 === void 0 ? void 0 : _data$peopleActivitie29.curQuarterVal) - Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie30 = data.peopleActivities) === null || _data$peopleActivitie30 === void 0 ? void 0 : (_data$peopleActivitie31 = _data$peopleActivitie30.followThrough) === null || _data$peopleActivitie31 === void 0 ? void 0 : _data$peopleActivitie31.prevQuarterVal)),\n    benchmarkValue: data === null || data === void 0 ? void 0 : (_data$peopleActivitie32 = data.peopleActivities) === null || _data$peopleActivitie32 === void 0 ? void 0 : (_data$peopleActivitie33 = _data$peopleActivitie32.followThrough) === null || _data$peopleActivitie33 === void 0 ? void 0 : _data$peopleActivitie33.benchMark\n  }, {\n    name: 'Untouched Opps',\n    value: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie34 = data.peopleActivities) === null || _data$peopleActivitie34 === void 0 ? void 0 : (_data$peopleActivitie35 = _data$peopleActivitie34.untouchedOpps) === null || _data$peopleActivitie35 === void 0 ? void 0 : _data$peopleActivitie35.curVal)),\n    percentage: Math.round(Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie36 = data.peopleActivities) === null || _data$peopleActivitie36 === void 0 ? void 0 : (_data$peopleActivitie37 = _data$peopleActivitie36.untouchedOpps) === null || _data$peopleActivitie37 === void 0 ? void 0 : _data$peopleActivitie37.curVal) - Number(data === null || data === void 0 ? void 0 : (_data$peopleActivitie38 = data.peopleActivities) === null || _data$peopleActivitie38 === void 0 ? void 0 : (_data$peopleActivitie39 = _data$peopleActivitie38.untouchedOpps) === null || _data$peopleActivitie39 === void 0 ? void 0 : _data$peopleActivitie39.prevVal)),\n    benchmarkValue: data === null || data === void 0 ? void 0 : (_data$peopleActivitie40 = data.peopleActivities) === null || _data$peopleActivitie40 === void 0 ? void 0 : (_data$peopleActivitie41 = _data$peopleActivitie40.untouchedOpps) === null || _data$peopleActivitie41 === void 0 ? void 0 : _data$peopleActivitie41.benchMark\n  }];\n  const {\n    loading: funnelLoading,\n    data: funnelData,\n    error: funnelError,\n    refetch: funnelRefetch\n  } = useQuery(GetPeopleActivitiesData, {\n    variables: {\n      dashboardInput: {\n        startDate: getStartDateOfQuery(),\n        endDate: getEndDateOfQuery(),\n        quarter: activeQuarter,\n        week: selectedOption\n      },\n      userId: userId\n    }\n  });\n  useEffect(() => {\n    void funnelRefetch();\n  }, [funnelRefetch]);\n  useEffect(() => {\n    setSelectedOption(currentWeek);\n  }, [currentWeek]);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        style: {\n          width: '90%',\n          height: 750\n        },\n        children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  if (funnelLoading) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        style: {\n          width: '90%',\n          height: 750\n        },\n        children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"space-between\",\n      alignItems: \"flex-end\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        className: classes.heading,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h2\",\n          color: \"textPrimary\",\n          children: _t_('Sales Activities')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h3\",\n          color: \"textPrimary\",\n          className: classes.subtitle,\n          children: _t_('Weekly self performance against activity goals, these can be shared with managers.')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"row\",\n          justify: \"center\",\n          alignItems: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: CalendarIcon,\n              className: classes.calendarIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(FormControl, {\n              variant: \"outlined\",\n              className: classes.formControl,\n              classes: {\n                root: classes.quantityRoot\n              },\n              children: /*#__PURE__*/_jsxDEV(Select, {\n                IconComponent: ExpandMoreIcon,\n                className: `${classes.dropDown} ${classes.rightSubHeading}`,\n                displayEmpty: true // defaultValue={totalWeeks}\n                ,\n                value: selectedOption,\n                onChange: handleChange,\n                MenuProps: {\n                  anchorOrigin: {\n                    vertical: 'bottom',\n                    horizontal: 'left'\n                  },\n                  transformOrigin: {\n                    vertical: 'top',\n                    horizontal: 'left'\n                  },\n                  getContentAnchorEl: null\n                },\n                inputProps: {\n                  classes: {\n                    icon: classes.icon,\n                    root: classes.selectRoot\n                  }\n                },\n                children: [...Array(13)].map((e, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                  className: classes.rightSubHeading,\n                  value: index + 1,\n                  children: [\"WEEKLY (\", index + 1, \"/13)\"]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"row\",\n      spacing: 3,\n      className: classes.mainDiv,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        container: true,\n        direction: \"column\",\n        style: {\n          flex: 50\n        },\n        spacing: 0,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(RepActivityBenchmarks, {\n            benchmarks: progressBarData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        container: true,\n        direction: \"column\",\n        style: {\n          flex: 50\n        },\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(TimeAllocation // data={timeAllocationData}\n          , {\n            startDate: getStartDateOfQuery(),\n            endDate: getEndDateOfQuery(),\n            height: 341,\n            week: selectedOption\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(SDRDealFunnel, {\n            activeNegotiations: funnelData === null || funnelData === void 0 ? void 0 : (_funnelData$peopleAct = funnelData.peopleActivities) === null || _funnelData$peopleAct === void 0 ? void 0 : (_funnelData$peopleAct2 = _funnelData$peopleAct.dealFunnel) === null || _funnelData$peopleAct2 === void 0 ? void 0 : _funnelData$peopleAct2.activeNegotiations,\n            opps: funnelData === null || funnelData === void 0 ? void 0 : (_funnelData$peopleAct3 = funnelData.peopleActivities) === null || _funnelData$peopleAct3 === void 0 ? void 0 : (_funnelData$peopleAct4 = _funnelData$peopleAct3.dealFunnel) === null || _funnelData$peopleAct4 === void 0 ? void 0 : _funnelData$peopleAct4.opps,\n            meetings: funnelData === null || funnelData === void 0 ? void 0 : (_funnelData$peopleAct5 = funnelData.peopleActivities) === null || _funnelData$peopleAct5 === void 0 ? void 0 : (_funnelData$peopleAct6 = _funnelData$peopleAct5.dealFunnel) === null || _funnelData$peopleAct6 === void 0 ? void 0 : _funnelData$peopleAct6.meetings,\n            proposals: funnelData === null || funnelData === void 0 ? void 0 : (_funnelData$peopleAct7 = funnelData.peopleActivities) === null || _funnelData$peopleAct7 === void 0 ? void 0 : (_funnelData$peopleAct8 = _funnelData$peopleAct7.dealFunnel) === null || _funnelData$peopleAct8 === void 0 ? void 0 : _funnelData$peopleAct8.proposals,\n            deals: funnelData === null || funnelData === void 0 ? void 0 : (_funnelData$peopleAct9 = funnelData.peopleActivities) === null || _funnelData$peopleAct9 === void 0 ? void 0 : (_funnelData$peopleAct10 = _funnelData$peopleAct9.dealFunnel) === null || _funnelData$peopleAct10 === void 0 ? void 0 : _funnelData$peopleAct10.deals\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SDRSalesActivities, \"3a+BFR6UZaUgYD4JFrRI6PJMP/M=\", true, function () {\n  return [useWindowSize, useQuery, useQuery];\n});\n\n_c = SDRSalesActivities;\nexport default SDRSalesActivities;\n\nvar _c;\n\n$RefreshReg$(_c, \"SDRSalesActivities\");","map":{"version":3,"sources":["/home/komal/Documents/Current/peoplelens_ui/src/components/organisms/SDRSalesActivities/index.tsx"],"names":["FormControl","Grid","makeStyles","MenuItem","Select","Typography","React","useEffect","useState","_t_","CalendarIcon","COLORS","plTheme","useWindowSize","TimeAllocation","RepActivityBenchmarks","useQuery","GetPeopleActivitiesData","Loader","ExpandMoreIcon","addDays","addMinutes","addWeeks","moment","SDRDealFunnel","SDRSalesActivities","currentWeek","activeQuarter","width","useStyles","subtitle","fontWeight","marginTop","calendarIcon","height","heading","mainDiv","item","borderRadius","border","BORDER_PRIMARY","boxShadow","BOX_SHADOW_CARDS","leftHeading","marginBottom","marginLeft","leftHeading1","formControl","quantityRoot","rightSubHeading","fontFamily","typography","fontSize","subtitle1","h2","lineHeight","fontStyle","h3","backgroundColor","GENERAL_WHITE","dropDown","icon","color","TEXT_HIGH_EMPHASIS","selectRoot","classes","userId","setUserId","firstDateOfQuarter","setFirstDateOfQuarter","Date","selectedOption","setSelectedOption","start","startOf","date","valueOf","setFullYear","getStartDateOfQuery","getEndDateOfQuery","outputDate","newDate","nextDay","toISOString","handleChange","event","target","value","loading","error","data","refetch","variables","dashboardInput","startDate","endDate","persona","message","timeAllocationData","peopleActivities","repTimeAllocation","progressBarData","name","Math","round","Number","objectiveScore","curQuarterVal","percentage","prevQuarterVal","benchmarkValue","benchMark","timeAllocationScore","pipelineDisciplineScore","followThrough","untouchedOpps","curVal","prevVal","funnelLoading","funnelData","funnelError","funnelRefetch","quarter","week","root","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","Array","map","e","index","flex","dealFunnel","activeNegotiations","opps","meetings","proposals","deals"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/restrict-plus-operands */\n/* eslint-disable react-hooks/rules-of-hooks */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport {\n  FormControl,\n  Grid,\n  makeStyles,\n  MenuItem,\n  Select,\n  Typography,\n} from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\n\nimport { _t_ } from '../../../utils/translation/translation';\n\nimport CalendarIcon from '../../../assets/calendar.png';\nimport { COLORS, plTheme } from '../../../plTheme';\nimport { useWindowSize } from '../../../utils/hooks/useWindowSize';\nimport TimeAllocation from '../../molecules/TimeAllocation';\nimport RepDealFunnel from '../RepDealFunnel';\nimport RepActivityBenchmarks from '../RepActivityBenchmarks';\nimport { QueryResult, useQuery } from '@apollo/client';\nimport { GetPeopleActivitiesData } from '../../../gql/queries/dashboard';\nimport { dates } from '../ManagerDashboard';\nimport Loader from '../../atoms/Loader';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { addDays, addMinutes, addWeeks, subYears } from 'date-fns';\nimport { peopleactivityQuery } from '../../../gql/types';\nimport moment from 'moment';\nimport SDRDealFunnel from '../SDRDealFunnel';\n\ninterface SDRSalesActivitiesProps {\n  currentWeek: number;\n  activeQuarter: number;\n}\n\nconst SDRSalesActivities: React.FC<SDRSalesActivitiesProps> = ({\n  currentWeek,\n  activeQuarter,\n}: SDRSalesActivitiesProps) => {\n  const [width] = useWindowSize();\n  const useStyles = makeStyles({\n    subtitle: {\n      fontWeight: 300,\n      marginTop: 13,\n    },\n    calendarIcon: {\n      width: 22,\n      height: 24,\n    },\n    heading: {\n      marginTop: 60,\n    },\n    mainDiv: {\n      marginTop: '2rem',\n    },\n    item: {\n      borderRadius: 4,\n      border: '1px solid ' + COLORS.BORDER_PRIMARY,\n      boxShadow: '0px 4px 20px ' + COLORS.BOX_SHADOW_CARDS,\n    },\n    leftHeading: {\n      marginTop: 20,\n      marginBottom: 18,\n      marginLeft: width < 1500 ? 20 : 100,\n    },\n    leftHeading1: {\n      marginBottom: 18,\n      marginLeft: width < 1500 ? 20 : 100,\n    },\n    formControl: {\n      marginLeft: 22,\n      width: '216px',\n      marginBottom: -10,\n    },\n    quantityRoot: {\n      '& .MuiOutlinedInput-notchedOutline': {\n        border: '1px solid rgba(215, 223, 233, 0.4)',\n        borderRadius: '2px',\n      },\n      '& .Mui-focused .MuiOutlinedInput-notchedOutline': {\n        border: '1px solid rgba(215, 223, 233, 0.4)',\n        borderRadius: '2px',\n      },\n      '&:hover .MuiOutlinedInput-notchedOutline': {\n        border: '1px solid rgba(215, 223, 233, 0.4)',\n        borderRadius: '2px',\n      },\n    },\n    rightSubHeading: {\n      fontFamily: plTheme.typography.fontFamily,\n      fontSize: plTheme.typography.subtitle1.fontSize,\n      fontWeight: plTheme.typography.h2.fontWeight,\n      lineHeight: plTheme.typography.subtitle1.lineHeight,\n      fontStyle: plTheme.typography.h3.fontStyle,\n      backgroundColor: COLORS.GENERAL_WHITE,\n    },\n    dropDown: {\n      height: 40,\n    },\n    icon: {\n      color: COLORS.TEXT_HIGH_EMPHASIS,\n    },\n    selectRoot: {\n      '&:focus': {\n        backgroundColor: 'transparent',\n      },\n    },\n  });\n\n  const classes = useStyles();\n\n  const [userId, setUserId] = useState('');\n  const [firstDateOfQuarter, setFirstDateOfQuarter] = React.useState<Date>(\n    new Date(),\n  );\n  const [selectedOption, setSelectedOption] = React.useState<number>(\n    currentWeek === 1 ? 1 : currentWeek - 1,\n  );\n\n  useEffect(() => {\n    const start = moment().startOf('quarter');\n    const date = new Date(start.valueOf());\n    date.setFullYear(2020); //To be removed later!\n    setFirstDateOfQuarter(new Date(date.valueOf()));\n  }, [activeQuarter]);\n\n  useEffect(() => {\n    getStartDateOfQuery();\n    getEndDateOfQuery();\n  }, [firstDateOfQuarter, selectedOption]);\n\n  useEffect(() => {\n    getStartDateOfQuery();\n    getEndDateOfQuery();\n  }, [currentWeek]);\n\n  const getStartDateOfQuery = () => {\n    const outputDate = firstDateOfQuarter;\n    const newDate = addWeeks(outputDate, selectedOption - 1);\n    const nextDay = addDays(newDate, 1);\n    return nextDay.toISOString();\n  };\n\n  const getEndDateOfQuery = () => {\n    const outputDate: Date = firstDateOfQuarter;\n    let newDate = addWeeks(outputDate, selectedOption - 1);\n    newDate = addDays(newDate, 8);\n    newDate = addMinutes(newDate, -1);\n    return newDate.toISOString();\n  };\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setSelectedOption(event.target.value as number);\n  };\n\n  const {\n    loading,\n    error,\n    data,\n    refetch,\n  }: QueryResult<peopleactivityQuery> = useQuery(GetPeopleActivitiesData, {\n    variables: {\n      dashboardInput: {\n        startDate: getStartDateOfQuery(),\n        endDate: getEndDateOfQuery(),\n      },\n      userId: userId,\n      persona: 'AE',\n    },\n  });\n\n  useEffect(() => {\n    void refetch();\n  }, [refetch, selectedOption]);\n\n  if (error) return <>`Error! ${error.message}` </>;\n\n  const timeAllocationData = data?.peopleActivities?.repTimeAllocation;\n\n  const progressBarData = [\n    {\n      name: 'Activity Score (Per Opp)',\n      value: Math.round(\n        Number(data?.peopleActivities?.objectiveScore?.curQuarterVal),\n      ),\n      percentage: Math.round(\n        Number(data?.peopleActivities?.objectiveScore?.curQuarterVal) -\n          Number(data?.peopleActivities?.objectiveScore?.prevQuarterVal),\n      ),\n      benchmarkValue: data?.peopleActivities?.objectiveScore?.benchMark,\n    },\n    {\n      name: 'Time Allocation',\n      value: Math.round(\n        Number(data?.peopleActivities?.timeAllocationScore?.curQuarterVal),\n      ),\n      percentage: Math.round(\n        Number(data?.peopleActivities?.timeAllocationScore?.curQuarterVal) -\n          Number(data?.peopleActivities?.timeAllocationScore?.prevQuarterVal),\n      ),\n      benchmarkValue: data?.peopleActivities?.timeAllocationScore?.benchMark,\n    },\n    {\n      name: 'Email Responsiveness',\n      value: Math.round(\n        Number(data?.peopleActivities?.pipelineDisciplineScore?.curQuarterVal),\n      ),\n      percentage: Math.round(\n        Number(data?.peopleActivities?.pipelineDisciplineScore?.curQuarterVal) -\n          Number(\n            data?.peopleActivities?.pipelineDisciplineScore?.prevQuarterVal,\n          ),\n      ),\n      benchmarkValue:\n        data?.peopleActivities?.pipelineDisciplineScore?.benchMark,\n    },\n    {\n      name: 'Contacts Touched per Account',\n      value: Math.round(\n        Number(data?.peopleActivities?.followThrough?.curQuarterVal),\n      ),\n      percentage: Math.round(\n        Number(data?.peopleActivities?.followThrough?.curQuarterVal) -\n          Number(data?.peopleActivities?.followThrough?.prevQuarterVal),\n      ),\n      benchmarkValue: data?.peopleActivities?.followThrough?.benchMark,\n    },\n    {\n      name: 'Untouched Opps',\n      value: Math.round(Number(data?.peopleActivities?.untouchedOpps?.curVal)),\n      percentage: Math.round(\n        Number(data?.peopleActivities?.untouchedOpps?.curVal) -\n          Number(data?.peopleActivities?.untouchedOpps?.prevVal),\n      ),\n      benchmarkValue: data?.peopleActivities?.untouchedOpps?.benchMark,\n    },\n  ];\n\n  const {\n    loading: funnelLoading,\n    data: funnelData,\n    error: funnelError,\n    refetch: funnelRefetch,\n  }: QueryResult<peopleactivityQuery> = useQuery(GetPeopleActivitiesData, {\n    variables: {\n      dashboardInput: {\n        startDate: getStartDateOfQuery(),\n        endDate: getEndDateOfQuery(),\n        quarter: activeQuarter,\n        week: selectedOption,\n      },\n      userId: userId,\n    },\n  });\n\n  useEffect(() => {\n    void funnelRefetch();\n  }, [funnelRefetch]);\n\n  useEffect(() => {\n    setSelectedOption(currentWeek);\n  }, [currentWeek]);\n\n  if (loading) {\n    return (\n      <>\n        <Grid style={{ width: '90%', height: 750 }}>\n          <Loader />\n        </Grid>\n      </>\n    );\n  }\n\n  if (funnelLoading) {\n    return (\n      <>\n        <Grid style={{ width: '90%', height: 750 }}>\n          <Loader />\n        </Grid>\n      </>\n    );\n  }\n  return (\n    <>\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"space-between\"\n        alignItems=\"flex-end\"\n      >\n        <Grid item className={classes.heading}>\n          <Typography variant=\"h2\" color=\"textPrimary\">\n            {_t_('Sales Activities')}\n          </Typography>\n          <Typography\n            variant=\"h3\"\n            color=\"textPrimary\"\n            className={classes.subtitle}\n          >\n            {_t_(\n              'Weekly self performance against activity goals, these can be shared with managers.',\n            )}\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n            <Grid item>\n              <img src={CalendarIcon} className={classes.calendarIcon} />\n            </Grid>\n            <Grid item>\n              <FormControl\n                variant=\"outlined\"\n                className={classes.formControl}\n                classes={{\n                  root: classes.quantityRoot,\n                }}\n              >\n                <Select\n                  IconComponent={ExpandMoreIcon}\n                  className={`${classes.dropDown} ${classes.rightSubHeading}`}\n                  displayEmpty\n                  // defaultValue={totalWeeks}\n                  value={selectedOption}\n                  onChange={handleChange}\n                  MenuProps={{\n                    anchorOrigin: {\n                      vertical: 'bottom',\n                      horizontal: 'left',\n                    },\n                    transformOrigin: {\n                      vertical: 'top',\n                      horizontal: 'left',\n                    },\n                    getContentAnchorEl: null,\n                  }}\n                  inputProps={{\n                    classes: {\n                      icon: classes.icon,\n                      root: classes.selectRoot,\n                    },\n                  }}\n                >\n                  {[...Array(13)].map((e, index) => (\n                    <MenuItem\n                      key={index}\n                      className={classes.rightSubHeading}\n                      value={index + 1}\n                    >\n                      WEEKLY ({index + 1}/13)\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid container direction=\"row\" spacing={3} className={classes.mainDiv}>\n        <Grid\n          item\n          container\n          direction=\"column\"\n          style={{ flex: 50 }}\n          spacing={0}\n        >\n          <Grid item>\n            <RepActivityBenchmarks benchmarks={progressBarData} />\n          </Grid>\n        </Grid>\n        <Grid\n          item\n          container\n          direction=\"column\"\n          style={{ flex: 50 }}\n          spacing={3}\n        >\n          <Grid item>\n            <TimeAllocation\n              // data={timeAllocationData}\n              startDate={getStartDateOfQuery()}\n              endDate={getEndDateOfQuery()}\n              height={341}\n              week={selectedOption}\n            />\n          </Grid>\n          <Grid item>\n            <SDRDealFunnel\n              activeNegotiations={\n                funnelData?.peopleActivities?.dealFunnel?.activeNegotiations\n              }\n              opps={funnelData?.peopleActivities?.dealFunnel?.opps}\n              meetings={funnelData?.peopleActivities?.dealFunnel?.meetings}\n              proposals={funnelData?.peopleActivities?.dealFunnel?.proposals}\n              deals={funnelData?.peopleActivities?.dealFunnel?.deals}\n            />\n          </Grid>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default SDRSalesActivities;\n"]},"metadata":{},"sourceType":"module"}