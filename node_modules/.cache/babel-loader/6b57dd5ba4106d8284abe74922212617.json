{"ast":null,"code":"var _jsxFileName = \"/home/komal/Documents/Current/peoplelens_ui/src/components/organisms/Leaderboard/index.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { Divider, Grid, makeStyles, Popover, Typography } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useGlobalStyles } from '../../../plStyles';\nimport { COLORS } from '../../../plTheme';\nimport KeyInputDriverBattleCards from '../KeyInputDriverBattleCards';\nimport HighPerformer from '../../../../src/assets/BattleCardsImages/highperformer.png';\nimport HighPotential from '../../../../src/assets/BattleCardsImages/highpotential.png';\nimport { useQuery } from '@apollo/client';\nimport { dates } from '../ManagerDashboard';\nimport Loader from '../../atoms/Loader';\nimport BubbleChart from '../../molecules/BubbleChart';\nimport { GetLeaderBoardData, GetRangeData } from '../../../gql/queries/leaderBoard';\nimport { _n_ } from '../../../utils/numerals/numerals';\nimport * as d3ScaleChromatic from 'd3-scale-chromatic';\nimport BubbleChartPopup from '../BubbleChartPopup';\nimport { _t_ } from '../../../utils/translation/translation';\nimport { useWindowSize } from '../../../utils/hooks/useWindowSize';\nimport ReactGA from 'react-ga';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nReactGA.pageview(window.location.pathname);\n\nconst Leaderboard = ({\n  activeQuarter\n}) => {\n  _s();\n\n  var _data3$rangeData, _data2$leaderBoard, _data2$leaderBoard2, _data2$leaderBoard3, _data2$leaderBoard4, _data2$leaderBoard5, _data2$leaderBoard6, _data2$leaderBoard7, _data2$leaderBoard8, _data2$leaderBoard9, _data2$leaderBoard10, _data2$leaderBoard11, _data2$leaderBoard12, _data2$leaderBoard13, _data2$leaderBoard14, _data2$leaderBoard15, _data2$leaderBoard15$, _data, _data2, _data2$battleCard$, _data3, _data3$battleCard$, _data4, _data5, _data5$battleCard$, _data6, _data6$battleCard$, _data1$battleCard$, _data1$battleCard$2, _data7, _data8, _data8$battleCard$, _data9, _data9$battleCard$, _data2$leaderBoard26, _data2$leaderBoard27, _data2$leaderBoard28, _data2$leaderBoard29, _data2$leaderBoard30, _data2$leaderBoard31, _data2$leaderBoard32, _data2$leaderBoard33, _data2$leaderBoard34, _data2$leaderBoard35, _data2$leaderBoard36, _data2$leaderBoard37, _data2$leaderBoard38, _data2$leaderBoard39, _data2$leaderBoard40, _data2$leaderBoard41, _data2$leaderBoard42, _data2$leaderBoard43, _activePersonLeft9, _activePersonLeft10, _activePersonLeft11, _activePersonLeft12, _activePersonLeft13, _activePersonLeft14, _data10, _data11, _data11$battleCard$, _data12, _data13, _data13$battleCard$, _data14, _data15, _data15$battleCard$, _activePersonLeft15, _data16, _data17, _data17$battleCard$, _activePersonRight3, _data1$battleCard$3, _data1$battleCard$4, _activePersonRight4, _data1$battleCard$5;\n\n  ReactGA.event({\n    category: 'Manager Lens',\n    action: 'Manager Leaderboard'\n  });\n  const bubbleData = [];\n  const [battleCardActions, setBattleCardActions] = useState([]);\n  const personData = [];\n  const [selectedCount, setSelectedCount] = useState(-1);\n  const [width] = useWindowSize();\n\n  const returnWidth = () => {\n    if (width < 1500) {\n      return '510px';\n    } else if (width > 1500) {\n      return '600px';\n    }\n  };\n\n  const useStyles = makeStyles({\n    bubbleChartContainer: {\n      height: 420,\n      backgroundColor: COLORS.GAMMA_WHITE,\n      border: '1px solid ' + COLORS.BORDER_PRIMARY\n    },\n    battleCardsTitle: {\n      marginTop: 36\n    },\n    battleCardTitleText: {\n      marginBottom: 24\n    },\n    battlecard: {\n      height: '628px',\n      width: returnWidth,\n      backgroundColor: COLORS.GAMMA_WHITE,\n      borderRadius: 4,\n      border: '2px solid ' + COLORS.GAMMA_WHITE,\n      boxShadow: '0px 0px 18px ' + COLORS.BATTLECARD_BOX_SHADOW\n    },\n    battleCardDiv: {\n      marginTop: 23\n    },\n    topHeading: {\n      paddingTop: '37px',\n      lineHeight: '20px',\n      paddingLeft: '40px'\n    },\n    divider: {\n      backgroundColor: COLORS.BATTLECARD_DIVIDER_COLOR,\n      borderRadius: '4px',\n      marginTop: '30px'\n    },\n    verticalDivider: {\n      backgroundColor: COLORS.BORDER_PRIMARY,\n      height: '620px'\n    },\n    avatar: {\n      width: '116.78px',\n      height: '127.38px'\n    },\n    avatar1: {\n      width: '121px',\n      height: '113.06px'\n    },\n    image: {\n      paddingTop: '180px',\n      paddingBottom: '180px',\n      marginLeft: width < 1500 ? 200 : 250\n    },\n    bubbleChartWidget: {\n      padding: '2% 5% 2% 5%'\n    }\n  });\n  const classes = useStyles();\n  const globalClasses = useGlobalStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [bucketNum, setBucketNum] = useState(0);\n  const [popOverCoordinates, setPopOverCoordinates] = useState({\n    x: 0,\n    y: 0\n  });\n  let [activePersonLeft, setActivePersonLeft] = useState({});\n  let [activePersonRight, setActivePersonRight] = useState({});\n  let [data, setBattleCardData] = useState([]);\n  let [data1, setBattleCardData1] = useState([]);\n  const [dropDownOption, setDropDownOption] = useState('Quota Attainment');\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? 'simple-popover' : undefined;\n  useEffect(() => {\n    setSelectedCount(-1);\n  }, [activeQuarter]);\n\n  const selectPerson = async person => {\n    var _activePersonLeft7, _activePersonRight;\n\n    setBattleCardActions([]);\n    let isCountUpdate = true;\n\n    if (selectedCount === 0) {\n      var _activePersonLeft, _activePersonLeft2;\n\n      if (((_activePersonLeft = activePersonLeft) === null || _activePersonLeft === void 0 ? void 0 : _activePersonLeft.id) && (person === null || person === void 0 ? void 0 : person.id) && (person === null || person === void 0 ? void 0 : person.id) !== ((_activePersonLeft2 = activePersonLeft) === null || _activePersonLeft2 === void 0 ? void 0 : _activePersonLeft2.id)) {\n        if (dropDownOption.toLowerCase().includes('sales cycle')) {\n          var _activePersonLeft3, _activePersonLeft4;\n\n          if ((person === null || person === void 0 ? void 0 : person.value) && ((_activePersonLeft3 = activePersonLeft) === null || _activePersonLeft3 === void 0 ? void 0 : _activePersonLeft3.value) && (person === null || person === void 0 ? void 0 : person.value) >= ((_activePersonLeft4 = activePersonLeft) === null || _activePersonLeft4 === void 0 ? void 0 : _activePersonLeft4.value)) {\n            activePersonRight = activePersonLeft;\n            setActivePersonRight && setActivePersonRight(activePersonLeft);\n            activePersonLeft = person;\n            setActivePersonLeft && setActivePersonLeft(person);\n          } else {\n            activePersonRight = person;\n            setActivePersonRight && setActivePersonRight(person);\n          }\n        } else {\n          var _activePersonLeft5, _activePersonLeft6;\n\n          if ((person === null || person === void 0 ? void 0 : person.value) && ((_activePersonLeft5 = activePersonLeft) === null || _activePersonLeft5 === void 0 ? void 0 : _activePersonLeft5.value) && (person === null || person === void 0 ? void 0 : person.value) >= ((_activePersonLeft6 = activePersonLeft) === null || _activePersonLeft6 === void 0 ? void 0 : _activePersonLeft6.value)) {\n            activePersonRight = person;\n            setActivePersonRight && setActivePersonRight(person);\n          } else {\n            activePersonRight = activePersonLeft;\n            setActivePersonRight && setActivePersonRight(activePersonLeft);\n            activePersonLeft = person;\n            setActivePersonLeft && setActivePersonLeft(person);\n          }\n        }\n      } else {\n        setActivePersonRight && setActivePersonRight({\n          id: ''\n        });\n        isCountUpdate = false;\n      }\n    } else if (selectedCount === -1 || selectedCount === 1) {\n      activePersonLeft = person;\n      setActivePersonLeft && setActivePersonLeft(person);\n    }\n\n    if (isCountUpdate) {\n      setSelectedCount && (selectedCount === -1 || selectedCount ? setSelectedCount(0) : setSelectedCount(1));\n    }\n\n    if (((_activePersonLeft7 = activePersonLeft) === null || _activePersonLeft7 === void 0 ? void 0 : _activePersonLeft7.id) != undefined && ((_activePersonRight = activePersonRight) === null || _activePersonRight === void 0 ? void 0 : _activePersonRight.id) != undefined) {\n      var _activePersonLeft8, _activePersonRight2;\n\n      getBattleCards((_activePersonLeft8 = activePersonLeft) === null || _activePersonLeft8 === void 0 ? void 0 : _activePersonLeft8.id, (_activePersonRight2 = activePersonRight) === null || _activePersonRight2 === void 0 ? void 0 : _activePersonRight2.id);\n    }\n\n    handleClose && handleClose();\n  }; // let jsonData: battleCard;\n\n\n  const getBattleCards = async (leftPersonId, rightPersonId) => {\n    const response = await fetch(`${process.env.REACT_APP_API_BASE || ''}/api/getBattleCards`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        startDate: dates === null || dates === void 0 ? void 0 : dates[activeQuarter].startDate,\n        endDate: dates === null || dates === void 0 ? void 0 : dates[activeQuarter].endDate,\n        outcome: dropDownOption,\n        product: localStorage.getItem('productSelected'),\n        quarter: activeQuarter,\n        userId1: leftPersonId,\n        userId2: rightPersonId\n      })\n    }).then(async response => {\n      var jsonData = await response.json();\n      data = jsonData;\n      setBattleCardData && setBattleCardData(jsonData);\n      setBattleCardData1 && setBattleCardData1(jsonData);\n    });\n  };\n\n  const {\n    data: data2,\n    error: error2,\n    loading: loading2\n  } = useQuery(GetLeaderBoardData, {\n    variables: {\n      dashboardInput: {\n        startDate: dates === null || dates === void 0 ? void 0 : dates[activeQuarter].startDate,\n        endDate: dates === null || dates === void 0 ? void 0 : dates[activeQuarter].endDate\n      },\n      outComeType: dropDownOption\n    }\n  });\n  const {\n    data: data3\n  } = useQuery(GetRangeData, {\n    variables: {\n      dashboardInput: {\n        startDate: dates === null || dates === void 0 ? void 0 : dates[activeQuarter].startDate,\n        endDate: dates === null || dates === void 0 ? void 0 : dates[activeQuarter].endDate\n      },\n      rangeNo: bucketNum,\n      outComeType: dropDownOption\n    }\n  });\n  data3 === null || data3 === void 0 ? void 0 : (_data3$rangeData = data3.rangeData) === null || _data3$rangeData === void 0 ? void 0 : _data3$rangeData.map(d => {\n    var _d$user, _d$user2, _d$user3;\n\n    personData.push({\n      avatar: '',\n      name: d === null || d === void 0 ? void 0 : (_d$user = d.user) === null || _d$user === void 0 ? void 0 : _d$user.firstName,\n      lastName: d === null || d === void 0 ? void 0 : (_d$user2 = d.user) === null || _d$user2 === void 0 ? void 0 : _d$user2.lastName,\n      value: (d === null || d === void 0 ? void 0 : d.metricValue) ? parseInt(parseFloat(d === null || d === void 0 ? void 0 : d.metricValue).toFixed()) : 0,\n      id: d === null || d === void 0 ? void 0 : (_d$user3 = d.user) === null || _d$user3 === void 0 ? void 0 : _d$user3.userId\n    });\n  });\n\n  if (loading2) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  if (error2) return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"`Error! $\", error2 === null || error2 === void 0 ? void 0 : error2.message, \"` \"]\n  }, void 0, true);\n  let color = 0;\n  let colorChangeInd = false;\n  let prevColor = 0;\n  const colorCutoffAt = (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard = data2.leaderBoard) === null || _data2$leaderBoard === void 0 ? void 0 : _data2$leaderBoard.avgMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard2 = data2.leaderBoard) === null || _data2$leaderBoard2 === void 0 ? void 0 : _data2$leaderBoard2.avgMetricVal) != undefined && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard3 = data2.leaderBoard) === null || _data2$leaderBoard3 === void 0 ? void 0 : _data2$leaderBoard3.maxMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard4 = data2.leaderBoard) === null || _data2$leaderBoard4 === void 0 ? void 0 : _data2$leaderBoard4.maxMetricVal) != undefined && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard5 = data2.leaderBoard) === null || _data2$leaderBoard5 === void 0 ? void 0 : _data2$leaderBoard5.minMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard6 = data2.leaderBoard) === null || _data2$leaderBoard6 === void 0 ? void 0 : _data2$leaderBoard6.minMetricVal) != undefined && dropDownOption !== 'Sales Cycle' ? data2.leaderBoard.avgMetricVal - (data2.leaderBoard.maxMetricVal - data2.leaderBoard.minMetricVal) / 10 : (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard7 = data2.leaderBoard) === null || _data2$leaderBoard7 === void 0 ? void 0 : _data2$leaderBoard7.avgMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard8 = data2.leaderBoard) === null || _data2$leaderBoard8 === void 0 ? void 0 : _data2$leaderBoard8.avgMetricVal) != undefined && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard9 = data2.leaderBoard) === null || _data2$leaderBoard9 === void 0 ? void 0 : _data2$leaderBoard9.maxMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard10 = data2.leaderBoard) === null || _data2$leaderBoard10 === void 0 ? void 0 : _data2$leaderBoard10.maxMetricVal) != undefined && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard11 = data2.leaderBoard) === null || _data2$leaderBoard11 === void 0 ? void 0 : _data2$leaderBoard11.minMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard12 = data2.leaderBoard) === null || _data2$leaderBoard12 === void 0 ? void 0 : _data2$leaderBoard12.minMetricVal) != undefined && dropDownOption === 'Sales Cycle' ? data2.leaderBoard.avgMetricVal - (data2.leaderBoard.minMetricVal - data2.leaderBoard.maxMetricVal) / 10 : 0;\n  const minRangeValue = (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard13 = data2.leaderBoard) === null || _data2$leaderBoard13 === void 0 ? void 0 : _data2$leaderBoard13.minMetricVal) != null && (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard14 = data2.leaderBoard) === null || _data2$leaderBoard14 === void 0 ? void 0 : _data2$leaderBoard14.minMetricVal) != undefined ? data2.leaderBoard.minMetricVal : 0;\n  data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard15 = data2.leaderBoard) === null || _data2$leaderBoard15 === void 0 ? void 0 : (_data2$leaderBoard15$ = _data2$leaderBoard15.rangeCount) === null || _data2$leaderBoard15$ === void 0 ? void 0 : _data2$leaderBoard15$.forEach(function (item, index) {\n    var _data2$leaderBoard16, _data2$leaderBoard17, _data2$leaderBoard21, _data2$leaderBoard22;\n\n    if (((_data2$leaderBoard16 = data2.leaderBoard) === null || _data2$leaderBoard16 === void 0 ? void 0 : _data2$leaderBoard16.minMetricVal) != null && ((_data2$leaderBoard17 = data2.leaderBoard) === null || _data2$leaderBoard17 === void 0 ? void 0 : _data2$leaderBoard17.maxMetricVal) != null && (item === null || item === void 0 ? void 0 : item.maxRangeVal) != null && (item === null || item === void 0 ? void 0 : item.minRangeVal) != null && (item === null || item === void 0 ? void 0 : item.avgRangeVal) != null && dropDownOption !== 'Sales Cycle') {\n      if ((item === null || item === void 0 ? void 0 : item.avgRangeVal) < colorCutoffAt) {\n        var _data2$leaderBoard18, _data2$leaderBoard19;\n\n        color = Math.max((0.3 - 0.1) * (((item === null || item === void 0 ? void 0 : item.avgRangeVal) - ((_data2$leaderBoard18 = data2.leaderBoard) === null || _data2$leaderBoard18 === void 0 ? void 0 : _data2$leaderBoard18.minMetricVal)) / (colorCutoffAt - ((_data2$leaderBoard19 = data2.leaderBoard) === null || _data2$leaderBoard19 === void 0 ? void 0 : _data2$leaderBoard19.minMetricVal))) + 0.1, 0.05);\n      } else if ((item === null || item === void 0 ? void 0 : item.avgRangeVal) >= colorCutoffAt && (item === null || item === void 0 ? void 0 : item.minRangeVal) <= colorCutoffAt) {\n        prevColor = color;\n        color = -1;\n        colorChangeInd = true;\n      } else {\n        var _data2$leaderBoard20;\n\n        color = (item === null || item === void 0 ? void 0 : item.bucketNo) ? (1.0 - 0.65) * (((item === null || item === void 0 ? void 0 : item.avgRangeVal) - colorCutoffAt) / (((_data2$leaderBoard20 = data2.leaderBoard) === null || _data2$leaderBoard20 === void 0 ? void 0 : _data2$leaderBoard20.maxMetricVal) - colorCutoffAt)) + 0.65 : 0.65;\n      }\n    } else if (((_data2$leaderBoard21 = data2.leaderBoard) === null || _data2$leaderBoard21 === void 0 ? void 0 : _data2$leaderBoard21.minMetricVal) != null && ((_data2$leaderBoard22 = data2.leaderBoard) === null || _data2$leaderBoard22 === void 0 ? void 0 : _data2$leaderBoard22.maxMetricVal) != null && (item === null || item === void 0 ? void 0 : item.maxRangeVal) != null && (item === null || item === void 0 ? void 0 : item.minRangeVal) != null && (item === null || item === void 0 ? void 0 : item.avgRangeVal) != null && dropDownOption === 'Sales Cycle') {\n      if ((item === null || item === void 0 ? void 0 : item.avgRangeVal) > colorCutoffAt) {\n        var _data2$leaderBoard23, _data2$leaderBoard24;\n\n        color = Math.max((0.3 - 0.1) * (((item === null || item === void 0 ? void 0 : item.avgRangeVal) - ((_data2$leaderBoard23 = data2.leaderBoard) === null || _data2$leaderBoard23 === void 0 ? void 0 : _data2$leaderBoard23.maxMetricVal)) / (colorCutoffAt - ((_data2$leaderBoard24 = data2.leaderBoard) === null || _data2$leaderBoard24 === void 0 ? void 0 : _data2$leaderBoard24.maxMetricVal))) + 0.1, 0.05);\n      } else if ((item === null || item === void 0 ? void 0 : item.avgRangeVal) <= colorCutoffAt && (item === null || item === void 0 ? void 0 : item.maxRangeVal) >= colorCutoffAt) {\n        prevColor = color;\n        color = -1;\n        colorChangeInd = true;\n      } else {\n        var _data2$leaderBoard25;\n\n        color = (item === null || item === void 0 ? void 0 : item.bucketNo) ? (1.0 - 0.65) * (((item === null || item === void 0 ? void 0 : item.avgRangeVal) - colorCutoffAt) / (((_data2$leaderBoard25 = data2.leaderBoard) === null || _data2$leaderBoard25 === void 0 ? void 0 : _data2$leaderBoard25.minMetricVal) - colorCutoffAt)) + 0.65 : 0.65;\n      }\n    }\n\n    let conditionalX = 0;\n\n    if (dropDownOption === 'Sales Cycle') {\n      conditionalX = (item === null || item === void 0 ? void 0 : item.bucketNo) !== null && (item === null || item === void 0 ? void 0 : item.bucketNo) !== undefined && (item === null || item === void 0 ? void 0 : item.bucketNo) ? item === null || item === void 0 ? void 0 : item.bucketNo : 0;\n    }\n\n    if (dropDownOption === 'Quota Attainment') {\n      conditionalX = index;\n    }\n\n    bubbleData.push({\n      x: (item === null || item === void 0 ? void 0 : item.bucketNo) !== null && (item === null || item === void 0 ? void 0 : item.bucketNo) !== undefined && (dropDownOption === 'Sales Cycle' || dropDownOption === 'Quota Attainment') ? conditionalX : (item === null || item === void 0 ? void 0 : item.avgRangeVal) ? (item === null || item === void 0 ? void 0 : item.avgRangeVal) - minRangeValue : 0,\n      y: 1,\n      z: (item === null || item === void 0 ? void 0 : item.bucketCount) ? item === null || item === void 0 ? void 0 : item.bucketCount : 0,\n      bucketNo: (item === null || item === void 0 ? void 0 : item.bucketNo) ? item === null || item === void 0 ? void 0 : item.bucketNo : 0,\n      // bucketNo: item?.avgRangeVal ? item?.avgRangeVal : 0,\n      color: color < 0 ? {\n        linearGradient: {\n          x1: 0,\n          x2: 1,\n          y1: 0,\n          y2: 0\n        },\n        stops: [[0, d3ScaleChromatic.interpolateRdYlGn(prevColor + 0.05)], [1, d3ScaleChromatic.interpolateRdYlGn(0.65)]]\n      } : d3ScaleChromatic.interpolateRdYlGn(color)\n    });\n  });\n\n  const bubbleOnClick = e => {\n    setBucketNum(e.point.bucketNo);\n    setAnchorEl(e.currentTarget);\n    setPopOverCoordinates({\n      x: e.clientX,\n      y: e.clientY\n    });\n  };\n\n  const dropdownOnChange = e => {\n    setDropDownOption(e.target.value);\n    setSelectedCount(-1);\n    setActivePersonLeft({});\n    setActivePersonRight({});\n  };\n\n  const userName1 = ((_data = data) === null || _data === void 0 ? void 0 : _data.battleCard) && ((_data2 = data) === null || _data2 === void 0 ? void 0 : (_data2$battleCard$ = _data2.battleCard[0]) === null || _data2$battleCard$ === void 0 ? void 0 : _data2$battleCard$.name) && `${(_data3 = data) === null || _data3 === void 0 ? void 0 : (_data3$battleCard$ = _data3.battleCard[0]) === null || _data3$battleCard$ === void 0 ? void 0 : _data3$battleCard$.name}`;\n  const userId1 = ((_data4 = data) === null || _data4 === void 0 ? void 0 : _data4.battleCard) && ((_data5 = data) === null || _data5 === void 0 ? void 0 : (_data5$battleCard$ = _data5.battleCard[0]) === null || _data5$battleCard$ === void 0 ? void 0 : _data5$battleCard$.userId) && `${(_data6 = data) === null || _data6 === void 0 ? void 0 : (_data6$battleCard$ = _data6.battleCard[0]) === null || _data6$battleCard$ === void 0 ? void 0 : _data6$battleCard$.userId}`;\n  const userName2 = (data1 === null || data1 === void 0 ? void 0 : data1.battleCard) && (data1 === null || data1 === void 0 ? void 0 : (_data1$battleCard$ = data1.battleCard[1]) === null || _data1$battleCard$ === void 0 ? void 0 : _data1$battleCard$.name) && `${data1 === null || data1 === void 0 ? void 0 : (_data1$battleCard$2 = data1.battleCard[1]) === null || _data1$battleCard$2 === void 0 ? void 0 : _data1$battleCard$2.name}`;\n  const userId2 = ((_data7 = data) === null || _data7 === void 0 ? void 0 : _data7.battleCard) && ((_data8 = data) === null || _data8 === void 0 ? void 0 : (_data8$battleCard$ = _data8.battleCard[1]) === null || _data8$battleCard$ === void 0 ? void 0 : _data8$battleCard$.userId) && `${(_data9 = data) === null || _data9 === void 0 ? void 0 : (_data9$battleCard$ = _data9.battleCard[1]) === null || _data9$battleCard$ === void 0 ? void 0 : _data9$battleCard$.userId}`;\n  const prefix = (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard26 = data2.leaderBoard) === null || _data2$leaderBoard26 === void 0 ? void 0 : _data2$leaderBoard26.metricDimension) ? (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard27 = data2.leaderBoard) === null || _data2$leaderBoard27 === void 0 ? void 0 : _data2$leaderBoard27.metricDimension) === ('Amount' || 'Days') ? (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard28 = data2.leaderBoard) === null || _data2$leaderBoard28 === void 0 ? void 0 : _data2$leaderBoard28.metricDimension) === 'Amount' ? '$' : 'Days' : '' : '';\n  const suffix = (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard29 = data2.leaderBoard) === null || _data2$leaderBoard29 === void 0 ? void 0 : _data2$leaderBoard29.metricDimension) ? (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard30 = data2.leaderBoard) === null || _data2$leaderBoard30 === void 0 ? void 0 : _data2$leaderBoard30.metricDimension) === ('Amount' || 'Days') ? '' : data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard31 = data2.leaderBoard) === null || _data2$leaderBoard31 === void 0 ? void 0 : _data2$leaderBoard31.metricDimension : '';\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Grid, {\n      \"data-testid\": \"bubble-chart-container\",\n      className: classes.bubbleChartContainer,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        className: classes.bubbleChartWidget,\n        children: /*#__PURE__*/_jsxDEV(BubbleChart, {\n          min: (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard32 = data2.leaderBoard) === null || _data2$leaderBoard32 === void 0 ? void 0 : _data2$leaderBoard32.minMetricVal) ? parseFloat(_n_(data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard33 = data2.leaderBoard) === null || _data2$leaderBoard33 === void 0 ? void 0 : _data2$leaderBoard33.minMetricVal, '0.0')) : 0,\n          max: (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard34 = data2.leaderBoard) === null || _data2$leaderBoard34 === void 0 ? void 0 : _data2$leaderBoard34.maxMetricVal) ? parseFloat(_n_(data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard35 = data2.leaderBoard) === null || _data2$leaderBoard35 === void 0 ? void 0 : _data2$leaderBoard35.maxMetricVal, '0.0')) : 0,\n          avg: (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard36 = data2.leaderBoard) === null || _data2$leaderBoard36 === void 0 ? void 0 : _data2$leaderBoard36.avgMetricVal) ? parseFloat(_n_(data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard37 = data2.leaderBoard) === null || _data2$leaderBoard37 === void 0 ? void 0 : _data2$leaderBoard37.avgMetricVal, '0.0')) : 0,\n          colorCutoff: colorCutoffAt,\n          prefix: (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard38 = data2.leaderBoard) === null || _data2$leaderBoard38 === void 0 ? void 0 : _data2$leaderBoard38.metricDimension) ? (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard39 = data2.leaderBoard) === null || _data2$leaderBoard39 === void 0 ? void 0 : _data2$leaderBoard39.metricDimension) === ('Amount' || 'Days') ? (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard40 = data2.leaderBoard) === null || _data2$leaderBoard40 === void 0 ? void 0 : _data2$leaderBoard40.metricDimension) === 'Amount' ? '$' : 'Days' : '' : '',\n          suffix: (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard41 = data2.leaderBoard) === null || _data2$leaderBoard41 === void 0 ? void 0 : _data2$leaderBoard41.metricDimension) ? (data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard42 = data2.leaderBoard) === null || _data2$leaderBoard42 === void 0 ? void 0 : _data2$leaderBoard42.metricDimension) === ('Amount' || 'Days') ? '' : data2 === null || data2 === void 0 ? void 0 : (_data2$leaderBoard43 = data2.leaderBoard) === null || _data2$leaderBoard43 === void 0 ? void 0 : _data2$leaderBoard43.metricDimension : '',\n          bubbleData: bubbleData,\n          bubbleOnClick: bubbleOnClick,\n          dropdownOnChange: dropdownOnChange,\n          dropdownSelection: dropDownOption,\n          activePersonNameLeft: ((_activePersonLeft9 = activePersonLeft) === null || _activePersonLeft9 === void 0 ? void 0 : _activePersonLeft9.name) && ((_activePersonLeft10 = activePersonLeft) === null || _activePersonLeft10 === void 0 ? void 0 : _activePersonLeft10.name),\n          activePersonLastNameLeft: ((_activePersonLeft11 = activePersonLeft) === null || _activePersonLeft11 === void 0 ? void 0 : _activePersonLeft11.lastName) && ((_activePersonLeft12 = activePersonLeft) === null || _activePersonLeft12 === void 0 ? void 0 : _activePersonLeft12.lastName),\n          selectedCount: selectedCount,\n          activePersonValueLeft: ((_activePersonLeft13 = activePersonLeft) === null || _activePersonLeft13 === void 0 ? void 0 : _activePersonLeft13.value) && ((_activePersonLeft14 = activePersonLeft) === null || _activePersonLeft14 === void 0 ? void 0 : _activePersonLeft14.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      \"data-testid\": \"battlecards-header\",\n      className: classes.battleCardsTitle,\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: selectedCount === -1 || selectedCount === 0 ? /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h2\",\n            color: \"textPrimary\",\n            className: classes.battleCardTitleText,\n            children: _t_('Key Input Driver Battlecards')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            className: globalClasses.h2Light,\n            color: \"textSecondary\",\n            children: [' ', _t_('The battlecards provide deeper insights on key'), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: 500\n              },\n              children: _t_('organization, people and customer')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 17\n            }, this), ' ', _t_('drivers impacting every repsâ€™ sales outcomes.')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h2\",\n          color: \"textPrimary\",\n          className: classes.battleCardTitleText,\n          children: ((_data10 = data) === null || _data10 === void 0 ? void 0 : _data10.battleCard) && ((_data11 = data) === null || _data11 === void 0 ? void 0 : (_data11$battleCard$ = _data11.battleCard[0]) === null || _data11$battleCard$ === void 0 ? void 0 : _data11$battleCard$.battleCardType)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      direction: \"row\",\n      justify: \"space-between\",\n      alignItems: \"center\",\n      className: classes.battleCardDiv,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: selectedCount === 1 ? /*#__PURE__*/_jsxDEV(KeyInputDriverBattleCards, {\n          battleCardData: ((_data12 = data) === null || _data12 === void 0 ? void 0 : _data12.battleCard) && ((_data13 = data) === null || _data13 === void 0 ? void 0 : (_data13$battleCard$ = _data13.battleCard[0]) === null || _data13$battleCard$ === void 0 ? void 0 : _data13$battleCard$.battleCardData),\n          battleCardActions: ((_data14 = data) === null || _data14 === void 0 ? void 0 : _data14.battleCard) && ((_data15 = data) === null || _data15 === void 0 ? void 0 : (_data15$battleCard$ = _data15.battleCard[0]) === null || _data15$battleCard$ === void 0 ? void 0 : _data15$battleCard$.battleCardActions),\n          name: userName1,\n          userId: userId1,\n          image: (_activePersonLeft15 = activePersonLeft) === null || _activePersonLeft15 === void 0 ? void 0 : _activePersonLeft15.avatar,\n          heading: selectedCount === 1 ? 'High Potential' : '',\n          trainingName: ((_data16 = data) === null || _data16 === void 0 ? void 0 : _data16.battleCard) && ((_data17 = data) === null || _data17 === void 0 ? void 0 : (_data17$battleCard$ = _data17.battleCard[0]) === null || _data17$battleCard$ === void 0 ? void 0 : _data17$battleCard$.title)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          className: classes.battlecard,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h2\",\n              className: classes.topHeading,\n              color: \"textSecondary\",\n              children: _t_('High Potential')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Divider, {\n              className: classes.divider\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            className: classes.image,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: HighPotential,\n              className: classes.avatar1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 15\n        }, this) // <div className={classes.battlecard} />\n\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(Divider, {\n          orientation: \"vertical\",\n          flexItem: true,\n          className: classes.verticalDivider\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: selectedCount === 1 && ((_activePersonRight3 = activePersonRight) === null || _activePersonRight3 === void 0 ? void 0 : _activePersonRight3.id) !== '' ? /*#__PURE__*/_jsxDEV(KeyInputDriverBattleCards, {\n          battleCardData: (data1 === null || data1 === void 0 ? void 0 : data1.battleCard) && (data1 === null || data1 === void 0 ? void 0 : (_data1$battleCard$3 = data1.battleCard[1]) === null || _data1$battleCard$3 === void 0 ? void 0 : _data1$battleCard$3.battleCardData),\n          battleCardActions: (data1 === null || data1 === void 0 ? void 0 : data1.battleCard) && (data1 === null || data1 === void 0 ? void 0 : (_data1$battleCard$4 = data1.battleCard[1]) === null || _data1$battleCard$4 === void 0 ? void 0 : _data1$battleCard$4.battleCardActions),\n          name: userName2,\n          userId: userId2,\n          image: (_activePersonRight4 = activePersonRight) === null || _activePersonRight4 === void 0 ? void 0 : _activePersonRight4.avatar,\n          heading: \"High Performer\",\n          trainingName: (data1 === null || data1 === void 0 ? void 0 : data1.battleCard) && (data1 === null || data1 === void 0 ? void 0 : (_data1$battleCard$5 = data1.battleCard[1]) === null || _data1$battleCard$5 === void 0 ? void 0 : _data1$battleCard$5.title)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 13\n        }, this) :\n        /*#__PURE__*/\n        // <div className={classes.battlecard} onClick={handleClick} />\n        _jsxDEV(Grid, {\n          container: true,\n          direction: \"column\",\n          className: classes.battlecard,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h2\",\n              className: classes.topHeading,\n              color: \"textSecondary\",\n              children: _t_('High Performer')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 649,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Divider, {\n              className: classes.divider\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            className: classes.image,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: HighPerformer,\n              className: classes.avatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 661,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popover, {\n      id: id,\n      open: open,\n      anchorReference: \"anchorPosition\",\n      anchorPosition: {\n        top: popOverCoordinates.y,\n        left: popOverCoordinates.x\n      },\n      anchorEl: anchorEl,\n      onClose: handleClose,\n      children: /*#__PURE__*/_jsxDEV(BubbleChartPopup, {\n        data: personData,\n        selectPerson: selectPerson,\n        prefix: prefix,\n        suffix: suffix\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 679,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Leaderboard, \"sBLSDN3Jy3aj8CW+2hwpyrsBt/Y=\", true, function () {\n  return [useWindowSize, useGlobalStyles, useQuery, useQuery];\n});\n\n_c = Leaderboard;\nexport default Leaderboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Leaderboard\");","map":{"version":3,"sources":["/home/komal/Documents/Current/peoplelens_ui/src/components/organisms/Leaderboard/index.tsx"],"names":["Divider","Grid","makeStyles","Popover","Typography","React","useEffect","useState","useGlobalStyles","COLORS","KeyInputDriverBattleCards","HighPerformer","HighPotential","useQuery","dates","Loader","BubbleChart","GetLeaderBoardData","GetRangeData","_n_","d3ScaleChromatic","BubbleChartPopup","_t_","useWindowSize","ReactGA","pageview","window","location","pathname","Leaderboard","activeQuarter","event","category","action","bubbleData","battleCardActions","setBattleCardActions","personData","selectedCount","setSelectedCount","width","returnWidth","useStyles","bubbleChartContainer","height","backgroundColor","GAMMA_WHITE","border","BORDER_PRIMARY","battleCardsTitle","marginTop","battleCardTitleText","marginBottom","battlecard","borderRadius","boxShadow","BATTLECARD_BOX_SHADOW","battleCardDiv","topHeading","paddingTop","lineHeight","paddingLeft","divider","BATTLECARD_DIVIDER_COLOR","verticalDivider","avatar","avatar1","image","paddingBottom","marginLeft","bubbleChartWidget","padding","classes","globalClasses","anchorEl","setAnchorEl","bucketNum","setBucketNum","popOverCoordinates","setPopOverCoordinates","x","y","activePersonLeft","setActivePersonLeft","activePersonRight","setActivePersonRight","data","setBattleCardData","data1","setBattleCardData1","dropDownOption","setDropDownOption","handleClose","open","Boolean","id","undefined","selectPerson","person","isCountUpdate","toLowerCase","includes","value","getBattleCards","leftPersonId","rightPersonId","response","fetch","process","env","REACT_APP_API_BASE","method","headers","body","JSON","stringify","startDate","endDate","outcome","product","localStorage","getItem","quarter","userId1","userId2","then","jsonData","json","data2","error","error2","loading","loading2","variables","dashboardInput","outComeType","data3","rangeNo","rangeData","map","d","push","name","user","firstName","lastName","metricValue","parseInt","parseFloat","toFixed","userId","message","color","colorChangeInd","prevColor","colorCutoffAt","leaderBoard","avgMetricVal","maxMetricVal","minMetricVal","minRangeValue","rangeCount","forEach","item","index","maxRangeVal","minRangeVal","avgRangeVal","Math","max","bucketNo","conditionalX","z","bucketCount","linearGradient","x1","x2","y1","y2","stops","interpolateRdYlGn","bubbleOnClick","e","point","currentTarget","clientX","clientY","dropdownOnChange","target","userName1","battleCard","userName2","prefix","metricDimension","suffix","h2Light","fontWeight","battleCardType","battleCardData","title","top","left"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-assignment */\r\nimport {\r\n  Divider,\r\n  Grid,\r\n  makeStyles,\r\n  Popover,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport { useGlobalStyles } from '../../../plStyles';\r\nimport { COLORS } from '../../../plTheme';\r\nimport KeyInputDriverBattleCards from '../KeyInputDriverBattleCards';\r\n\r\nimport HighPerformer from '../../../../src/assets/BattleCardsImages/highperformer.png';\r\n\r\nimport HighPotential from '../../../../src/assets/BattleCardsImages/highpotential.png';\r\nimport { QueryResult, useQuery } from '@apollo/client';\r\nimport { dates } from '../ManagerDashboard';\r\n\r\nimport {\r\n  battleCard as BattleCardResponse,\r\n  battleCard_battleCard_battleCardActions,\r\n  leaderBoard as LeaderBoardResponse,\r\n  rangeData as RangeDataResponse,\r\n} from '../../../gql/types';\r\nimport Loader from '../../atoms/Loader';\r\nimport { GetBattleCards } from '../../../gql/queries/battleCards';\r\nimport BubbleChart from '../../molecules/BubbleChart';\r\nimport {\r\n  GetLeaderBoardData,\r\n  GetRangeData,\r\n} from '../../../gql/queries/leaderBoard';\r\nimport { _n_ } from '../../../utils/numerals/numerals';\r\nimport * as d3ScaleChromatic from 'd3-scale-chromatic';\r\nimport BubbleChartPopup from '../BubbleChartPopup';\r\nimport { PersonProps } from '../BubbleChartPopup/index';\r\nimport { _t_ } from '../../../utils/translation/translation';\r\nimport { useWindowSize } from '../../../utils/hooks/useWindowSize';\r\nimport ReactGA from 'react-ga';\r\nReactGA.pageview(window.location.pathname);\r\n\r\nexport interface LeaderboardProps {\r\n  activeQuarter: number;\r\n}\r\n\r\nconst Leaderboard: React.FC<LeaderboardProps> = ({\r\n  activeQuarter,\r\n}: LeaderboardProps) => {\r\n  ReactGA.event({\r\n    category: 'Manager Lens',\r\n    action: 'Manager Leaderboard',\r\n  });\r\n  const bubbleData: {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n    bucketNo: number;\r\n    color: any;\r\n  }[] = [];\r\n\r\n  const [battleCardActions, setBattleCardActions] = useState<\r\n    battleCard_battleCard_battleCardActions[]\r\n  >([]);\r\n\r\n  const personData: PersonProps[] = [];\r\n  const [selectedCount, setSelectedCount] = useState<number>(-1);\r\n\r\n  const [width] = useWindowSize();\r\n\r\n  const returnWidth = () => {\r\n    if (width < 1500) {\r\n      return '510px';\r\n    } else if (width > 1500) {\r\n      return '600px';\r\n    }\r\n  };\r\n  const useStyles = makeStyles({\r\n    bubbleChartContainer: {\r\n      height: 420,\r\n      backgroundColor: COLORS.GAMMA_WHITE,\r\n      border: '1px solid ' + COLORS.BORDER_PRIMARY,\r\n    },\r\n    battleCardsTitle: {\r\n      marginTop: 36,\r\n    },\r\n    battleCardTitleText: {\r\n      marginBottom: 24,\r\n    },\r\n    battlecard: {\r\n      height: '628px',\r\n      width: returnWidth,\r\n      backgroundColor: COLORS.GAMMA_WHITE,\r\n      borderRadius: 4,\r\n      border: '2px solid ' + COLORS.GAMMA_WHITE,\r\n      boxShadow: '0px 0px 18px ' + COLORS.BATTLECARD_BOX_SHADOW,\r\n    },\r\n    battleCardDiv: {\r\n      marginTop: 23,\r\n    },\r\n    topHeading: {\r\n      paddingTop: '37px',\r\n      lineHeight: '20px',\r\n      paddingLeft: '40px',\r\n    },\r\n    divider: {\r\n      backgroundColor: COLORS.BATTLECARD_DIVIDER_COLOR,\r\n      borderRadius: '4px',\r\n      marginTop: '30px',\r\n    },\r\n    verticalDivider: {\r\n      backgroundColor: COLORS.BORDER_PRIMARY,\r\n      height: '620px',\r\n    },\r\n    avatar: {\r\n      width: '116.78px',\r\n      height: '127.38px',\r\n    },\r\n    avatar1: {\r\n      width: '121px',\r\n      height: '113.06px',\r\n    },\r\n    image: {\r\n      paddingTop: '180px',\r\n      paddingBottom: '180px',\r\n      marginLeft: width < 1500 ? 200 : 250,\r\n    },\r\n    bubbleChartWidget: {\r\n      padding: '2% 5% 2% 5%',\r\n    },\r\n  });\r\n  const classes = useStyles();\r\n  const globalClasses = useGlobalStyles();\r\n\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [bucketNum, setBucketNum] = useState(0);\r\n  const [popOverCoordinates, setPopOverCoordinates] = useState({ x: 0, y: 0 });\r\n\r\n  let [activePersonLeft, setActivePersonLeft] = useState<\r\n    PersonProps | undefined\r\n  >({});\r\n  let [activePersonRight, setActivePersonRight] = useState<\r\n    PersonProps | undefined\r\n  >({});\r\n  let [data, setBattleCardData] = useState<any>([]);\r\n  let [data1, setBattleCardData1] = useState<any>([]);\r\n  const [dropDownOption, setDropDownOption] = useState('Quota Attainment');\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n\r\n  useEffect(() => {\r\n    setSelectedCount(-1);\r\n  }, [activeQuarter]);\r\n\r\n  const selectPerson = async (person: PersonProps) => {\r\n    setBattleCardActions([]);\r\n    let isCountUpdate = true;\r\n    if (selectedCount === 0) {\r\n      if (\r\n        activePersonLeft?.id &&\r\n        person?.id &&\r\n        person?.id !== activePersonLeft?.id\r\n      ) {\r\n        if (dropDownOption.toLowerCase().includes('sales cycle')) {\r\n          if (\r\n            person?.value &&\r\n            activePersonLeft?.value &&\r\n            person?.value >= activePersonLeft?.value\r\n          ) {\r\n            activePersonRight = activePersonLeft;\r\n            setActivePersonRight && setActivePersonRight(activePersonLeft);\r\n            activePersonLeft = person;\r\n            setActivePersonLeft && setActivePersonLeft(person);\r\n          } else {\r\n            activePersonRight = person;\r\n            setActivePersonRight && setActivePersonRight(person);\r\n          }\r\n        } else {\r\n          if (\r\n            person?.value &&\r\n            activePersonLeft?.value &&\r\n            person?.value >= activePersonLeft?.value\r\n          ) {\r\n            activePersonRight = person;\r\n            setActivePersonRight && setActivePersonRight(person);\r\n          } else {\r\n            activePersonRight = activePersonLeft;\r\n            setActivePersonRight && setActivePersonRight(activePersonLeft);\r\n            activePersonLeft = person;\r\n            setActivePersonLeft && setActivePersonLeft(person);\r\n          }\r\n        }\r\n      } else {\r\n        setActivePersonRight && setActivePersonRight({ id: '' });\r\n        isCountUpdate = false;\r\n      }\r\n    } else if (selectedCount === -1 || selectedCount === 1) {\r\n      activePersonLeft = person;\r\n      setActivePersonLeft && setActivePersonLeft(person);\r\n    }\r\n    if (isCountUpdate) {\r\n      setSelectedCount &&\r\n        (selectedCount === -1 || selectedCount\r\n          ? setSelectedCount(0)\r\n          : setSelectedCount(1));\r\n    }\r\n    if (\r\n      activePersonLeft?.id != undefined &&\r\n      activePersonRight?.id != undefined\r\n    ) {\r\n      getBattleCards(activePersonLeft?.id, activePersonRight?.id);\r\n    }\r\n    handleClose && handleClose();\r\n  };\r\n\r\n  // let jsonData: battleCard;\r\n\r\n  const getBattleCards = async (\r\n    leftPersonId: string,\r\n    rightPersonId: string,\r\n  ) => {\r\n    const response = await fetch(\r\n      `${process.env.REACT_APP_API_BASE || ''}/api/getBattleCards`,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          startDate: dates?.[activeQuarter].startDate,\r\n          endDate: dates?.[activeQuarter].endDate,\r\n          outcome: dropDownOption,\r\n          product: localStorage.getItem('productSelected'),\r\n          quarter: activeQuarter,\r\n          userId1: leftPersonId,\r\n          userId2: rightPersonId,\r\n        }),\r\n      },\r\n    ).then(async (response) => {\r\n      var jsonData = await response.json();\r\n      data = jsonData;\r\n      setBattleCardData && setBattleCardData(jsonData);\r\n      setBattleCardData1 && setBattleCardData1(jsonData);\r\n    });\r\n  };\r\n\r\n  const {\r\n    data: data2,\r\n    error: error2,\r\n    loading: loading2,\r\n  }: QueryResult<LeaderBoardResponse> = useQuery(GetLeaderBoardData, {\r\n    variables: {\r\n      dashboardInput: {\r\n        startDate: dates?.[activeQuarter].startDate,\r\n        endDate: dates?.[activeQuarter].endDate,\r\n      },\r\n      outComeType: dropDownOption,\r\n    },\r\n  });\r\n\r\n  const { data: data3 }: QueryResult<RangeDataResponse> = useQuery(\r\n    GetRangeData,\r\n    {\r\n      variables: {\r\n        dashboardInput: {\r\n          startDate: dates?.[activeQuarter].startDate,\r\n          endDate: dates?.[activeQuarter].endDate,\r\n        },\r\n        rangeNo: bucketNum,\r\n        outComeType: dropDownOption,\r\n      },\r\n    },\r\n  );\r\n\r\n  data3?.rangeData?.map((d) => {\r\n    personData.push({\r\n      avatar: '',\r\n      name: d?.user?.firstName,\r\n      lastName: d?.user?.lastName,\r\n      value: d?.metricValue\r\n        ? parseInt(parseFloat(d?.metricValue).toFixed())\r\n        : 0,\r\n      id: d?.user?.userId,\r\n    });\r\n  });\r\n\r\n  if (loading2) {\r\n    return (\r\n      <>\r\n        <Loader />\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (error2) return <>`Error! ${error2?.message}` </>;\r\n\r\n  let color = 0;\r\n  let colorChangeInd = false;\r\n  let prevColor = 0;\r\n  const colorCutoffAt =\r\n    data2?.leaderBoard?.avgMetricVal != null &&\r\n    data2?.leaderBoard?.avgMetricVal != undefined &&\r\n    data2?.leaderBoard?.maxMetricVal != null &&\r\n    data2?.leaderBoard?.maxMetricVal != undefined &&\r\n    data2?.leaderBoard?.minMetricVal != null &&\r\n    data2?.leaderBoard?.minMetricVal != undefined &&\r\n    dropDownOption !== 'Sales Cycle'\r\n      ? data2.leaderBoard.avgMetricVal -\r\n        (data2.leaderBoard.maxMetricVal - data2.leaderBoard.minMetricVal) / 10\r\n      : data2?.leaderBoard?.avgMetricVal != null &&\r\n        data2?.leaderBoard?.avgMetricVal != undefined &&\r\n        data2?.leaderBoard?.maxMetricVal != null &&\r\n        data2?.leaderBoard?.maxMetricVal != undefined &&\r\n        data2?.leaderBoard?.minMetricVal != null &&\r\n        data2?.leaderBoard?.minMetricVal != undefined &&\r\n        dropDownOption === 'Sales Cycle'\r\n      ? data2.leaderBoard.avgMetricVal -\r\n        (data2.leaderBoard.minMetricVal - data2.leaderBoard.maxMetricVal) / 10\r\n      : 0;\r\n  const minRangeValue =\r\n    data2?.leaderBoard?.minMetricVal != null &&\r\n    data2?.leaderBoard?.minMetricVal != undefined\r\n      ? data2.leaderBoard.minMetricVal\r\n      : 0;\r\n\r\n  data2?.leaderBoard?.rangeCount?.forEach(function (item, index) {\r\n    if (\r\n      data2.leaderBoard?.minMetricVal != null &&\r\n      data2.leaderBoard?.maxMetricVal != null &&\r\n      item?.maxRangeVal != null &&\r\n      item?.minRangeVal != null &&\r\n      item?.avgRangeVal != null &&\r\n      dropDownOption !== 'Sales Cycle'\r\n    ) {\r\n      if (item?.avgRangeVal < colorCutoffAt) {\r\n        color = Math.max(\r\n          (0.3 - 0.1) *\r\n            ((item?.avgRangeVal - data2.leaderBoard?.minMetricVal) /\r\n              (colorCutoffAt - data2.leaderBoard?.minMetricVal)) +\r\n            0.1,\r\n          0.05,\r\n        );\r\n      } else if (\r\n        item?.avgRangeVal >= colorCutoffAt &&\r\n        item?.minRangeVal <= colorCutoffAt\r\n      ) {\r\n        prevColor = color;\r\n        color = -1;\r\n        colorChangeInd = true;\r\n      } else {\r\n        color = item?.bucketNo\r\n          ? (1.0 - 0.65) *\r\n              ((item?.avgRangeVal - colorCutoffAt) /\r\n                (data2.leaderBoard?.maxMetricVal - colorCutoffAt)) +\r\n            0.65\r\n          : 0.65;\r\n      }\r\n    } else if (\r\n      data2.leaderBoard?.minMetricVal != null &&\r\n      data2.leaderBoard?.maxMetricVal != null &&\r\n      item?.maxRangeVal != null &&\r\n      item?.minRangeVal != null &&\r\n      item?.avgRangeVal != null &&\r\n      dropDownOption === 'Sales Cycle'\r\n    ) {\r\n      if (item?.avgRangeVal > colorCutoffAt) {\r\n        color = Math.max(\r\n          (0.3 - 0.1) *\r\n            ((item?.avgRangeVal - data2.leaderBoard?.maxMetricVal) /\r\n              (colorCutoffAt - data2.leaderBoard?.maxMetricVal)) +\r\n            0.1,\r\n          0.05,\r\n        );\r\n      } else if (\r\n        item?.avgRangeVal <= colorCutoffAt &&\r\n        item?.maxRangeVal >= colorCutoffAt\r\n      ) {\r\n        prevColor = color;\r\n        color = -1;\r\n        colorChangeInd = true;\r\n      } else {\r\n        color = item?.bucketNo\r\n          ? (1.0 - 0.65) *\r\n              ((item?.avgRangeVal - colorCutoffAt) /\r\n                (data2.leaderBoard?.minMetricVal - colorCutoffAt)) +\r\n            0.65\r\n          : 0.65;\r\n      }\r\n    }\r\n\r\n    let conditionalX = 0;\r\n    if (dropDownOption === 'Sales Cycle') {\r\n      conditionalX =\r\n        item?.bucketNo !== null &&\r\n        item?.bucketNo !== undefined &&\r\n        item?.bucketNo\r\n          ? item?.bucketNo\r\n          : 0;\r\n    }\r\n\r\n    if (dropDownOption === 'Quota Attainment') {\r\n      conditionalX = index;\r\n    }\r\n    bubbleData.push({\r\n      x:\r\n        item?.bucketNo !== null &&\r\n        item?.bucketNo !== undefined &&\r\n        (dropDownOption === 'Sales Cycle' ||\r\n          dropDownOption === 'Quota Attainment')\r\n          ? conditionalX\r\n          : item?.avgRangeVal\r\n          ? item?.avgRangeVal - minRangeValue\r\n          : 0,\r\n      y: 1,\r\n      z: item?.bucketCount ? item?.bucketCount : 0,\r\n      bucketNo: item?.bucketNo ? item?.bucketNo : 0,\r\n      // bucketNo: item?.avgRangeVal ? item?.avgRangeVal : 0,\r\n      color:\r\n        color < 0\r\n          ? {\r\n              linearGradient: { x1: 0, x2: 1, y1: 0, y2: 0 },\r\n              stops: [\r\n                [0, d3ScaleChromatic.interpolateRdYlGn(prevColor + 0.05)],\r\n                [1, d3ScaleChromatic.interpolateRdYlGn(0.65)],\r\n              ],\r\n            }\r\n          : d3ScaleChromatic.interpolateRdYlGn(color),\r\n    });\r\n  });\r\n\r\n  const bubbleOnClick = (e: any) => {\r\n    setBucketNum(e.point.bucketNo);\r\n    setAnchorEl(e.currentTarget);\r\n    setPopOverCoordinates({ x: e.clientX, y: e.clientY });\r\n  };\r\n\r\n  const dropdownOnChange = (\r\n    e: ChangeEvent<HTMLTextAreaElement | HTMLInputElement>,\r\n  ) => {\r\n    setDropDownOption(e.target.value);\r\n    setSelectedCount(-1);\r\n    setActivePersonLeft({});\r\n    setActivePersonRight({});\r\n  };\r\n\r\n  const userName1 =\r\n    data?.battleCard &&\r\n    data?.battleCard[0]?.name &&\r\n    `${data?.battleCard[0]?.name}`;\r\n\r\n  const userId1 =\r\n    data?.battleCard &&\r\n    data?.battleCard[0]?.userId &&\r\n    `${data?.battleCard[0]?.userId}`;\r\n\r\n  const userName2 =\r\n    data1?.battleCard &&\r\n    data1?.battleCard[1]?.name &&\r\n    `${data1?.battleCard[1]?.name}`;\r\n\r\n  const userId2 =\r\n    data?.battleCard &&\r\n    data?.battleCard[1]?.userId &&\r\n    `${data?.battleCard[1]?.userId}`;\r\n\r\n  const prefix = data2?.leaderBoard?.metricDimension\r\n    ? data2?.leaderBoard?.metricDimension === ('Amount' || 'Days')\r\n      ? data2?.leaderBoard?.metricDimension === 'Amount'\r\n        ? '$'\r\n        : 'Days'\r\n      : ''\r\n    : '';\r\n  const suffix = data2?.leaderBoard?.metricDimension\r\n    ? data2?.leaderBoard?.metricDimension === ('Amount' || 'Days')\r\n      ? ''\r\n      : data2?.leaderBoard?.metricDimension\r\n    : '';\r\n\r\n  return (\r\n    <>\r\n      <Grid\r\n        data-testid=\"bubble-chart-container\"\r\n        className={classes.bubbleChartContainer}\r\n      >\r\n        <Grid item className={classes.bubbleChartWidget}>\r\n          <BubbleChart\r\n            min={\r\n              data2?.leaderBoard?.minMetricVal\r\n                ? parseFloat(_n_(data2?.leaderBoard?.minMetricVal, '0.0'))\r\n                : 0\r\n            }\r\n            max={\r\n              data2?.leaderBoard?.maxMetricVal\r\n                ? parseFloat(_n_(data2?.leaderBoard?.maxMetricVal, '0.0'))\r\n                : 0\r\n            }\r\n            avg={\r\n              data2?.leaderBoard?.avgMetricVal\r\n                ? parseFloat(_n_(data2?.leaderBoard?.avgMetricVal, '0.0'))\r\n                : 0\r\n            }\r\n            colorCutoff={colorCutoffAt}\r\n            prefix={\r\n              data2?.leaderBoard?.metricDimension\r\n                ? data2?.leaderBoard?.metricDimension === ('Amount' || 'Days')\r\n                  ? data2?.leaderBoard?.metricDimension === 'Amount'\r\n                    ? '$'\r\n                    : 'Days'\r\n                  : ''\r\n                : ''\r\n            }\r\n            suffix={\r\n              data2?.leaderBoard?.metricDimension\r\n                ? data2?.leaderBoard?.metricDimension === ('Amount' || 'Days')\r\n                  ? ''\r\n                  : data2?.leaderBoard?.metricDimension\r\n                : ''\r\n            }\r\n            bubbleData={bubbleData}\r\n            bubbleOnClick={bubbleOnClick}\r\n            dropdownOnChange={dropdownOnChange}\r\n            dropdownSelection={dropDownOption}\r\n            activePersonNameLeft={\r\n              activePersonLeft?.name && activePersonLeft?.name\r\n            }\r\n            activePersonLastNameLeft={\r\n              activePersonLeft?.lastName && activePersonLeft?.lastName\r\n            }\r\n            selectedCount={selectedCount}\r\n            activePersonValueLeft={\r\n              activePersonLeft?.value && activePersonLeft?.value\r\n            }\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      <Grid\r\n        data-testid=\"battlecards-header\"\r\n        className={classes.battleCardsTitle}\r\n      >\r\n        <>\r\n          {selectedCount === -1 || selectedCount === 0 ? (\r\n            <Grid item>\r\n              <Typography\r\n                variant=\"h2\"\r\n                color=\"textPrimary\"\r\n                className={classes.battleCardTitleText}\r\n              >\r\n                {_t_('Key Input Driver Battlecards')}\r\n              </Typography>\r\n              <Typography\r\n                className={globalClasses.h2Light}\r\n                color=\"textSecondary\"\r\n              >\r\n                {' '}\r\n                {_t_('The battlecards provide deeper insights on key')}{' '}\r\n                <span style={{ fontWeight: 500 }}>\r\n                  {_t_('organization, people and customer')}\r\n                </span>{' '}\r\n                {_t_('drivers impacting every repsâ€™ sales outcomes.')}\r\n              </Typography>\r\n            </Grid>\r\n          ) : (\r\n            <Typography\r\n              variant=\"h2\"\r\n              color=\"textPrimary\"\r\n              className={classes.battleCardTitleText}\r\n            >\r\n              {data?.battleCard && data?.battleCard[0]?.battleCardType}\r\n            </Typography>\r\n          )}\r\n        </>\r\n      </Grid>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justify=\"space-between\"\r\n        alignItems=\"center\"\r\n        className={classes.battleCardDiv}\r\n      >\r\n        <Grid item>\r\n          {\r\n            selectedCount === 1 ? (\r\n              <KeyInputDriverBattleCards\r\n                battleCardData={\r\n                  data?.battleCard && data?.battleCard[0]?.battleCardData\r\n                }\r\n                battleCardActions={\r\n                  data?.battleCard && data?.battleCard[0]?.battleCardActions\r\n                }\r\n                name={userName1}\r\n                userId={userId1}\r\n                image={activePersonLeft?.avatar}\r\n                heading={selectedCount === 1 ? 'High Potential' : ''}\r\n                trainingName={data?.battleCard && data?.battleCard[0]?.title}\r\n              />\r\n            ) : (\r\n              <Grid container direction=\"column\" className={classes.battlecard}>\r\n                <Grid item>\r\n                  <Typography\r\n                    variant=\"h2\"\r\n                    className={classes.topHeading}\r\n                    color=\"textSecondary\"\r\n                  >\r\n                    {_t_('High Potential')}\r\n                  </Typography>\r\n                </Grid>\r\n                <Grid item>\r\n                  {/* style={{ border: '1px solid red' }} */}\r\n                  <Divider className={classes.divider}></Divider>\r\n                </Grid>\r\n                <Grid item className={classes.image}>\r\n                  <img src={HighPotential} className={classes.avatar1} />\r\n                </Grid>\r\n              </Grid>\r\n            )\r\n            // <div className={classes.battlecard} />\r\n          }\r\n        </Grid>\r\n        <Grid item>\r\n          <Divider\r\n            orientation=\"vertical\"\r\n            flexItem\r\n            className={classes.verticalDivider}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          {selectedCount === 1 && activePersonRight?.id !== '' ? (\r\n            <KeyInputDriverBattleCards\r\n              battleCardData={\r\n                data1?.battleCard && data1?.battleCard[1]?.battleCardData\r\n              }\r\n              battleCardActions={\r\n                data1?.battleCard && data1?.battleCard[1]?.battleCardActions\r\n              }\r\n              name={userName2}\r\n              userId={userId2}\r\n              image={activePersonRight?.avatar}\r\n              heading=\"High Performer\"\r\n              trainingName={data1?.battleCard && data1?.battleCard[1]?.title}\r\n            />\r\n          ) : (\r\n            // <div className={classes.battlecard} onClick={handleClick} />\r\n            <Grid container direction=\"column\" className={classes.battlecard}>\r\n              <Grid item>\r\n                <Typography\r\n                  variant=\"h2\"\r\n                  className={classes.topHeading}\r\n                  color=\"textSecondary\"\r\n                >\r\n                  {/* {selectedCount >= 0 ? '' : _t_('High Performer')} */}\r\n                  {_t_('High Performer')}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid item>\r\n                <Divider className={classes.divider}></Divider>\r\n              </Grid>\r\n              <Grid item className={classes.image}>\r\n                <img src={HighPerformer} className={classes.avatar} />\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n        </Grid>\r\n      </Grid>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorReference=\"anchorPosition\"\r\n        anchorPosition={{\r\n          top: popOverCoordinates.y,\r\n          left: popOverCoordinates.x,\r\n        }}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n      >\r\n        <BubbleChartPopup\r\n          data={personData}\r\n          selectPerson={selectPerson}\r\n          prefix={prefix}\r\n          suffix={suffix}\r\n        />\r\n      </Popover>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Leaderboard;\r\n"]},"metadata":{},"sourceType":"module"}